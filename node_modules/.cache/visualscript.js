/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/visualscript@0.0.4/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).visualscript={})}(this,(function(t){"use strict";
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const e=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),s=new Map;class r{constructor(t,e){if(this._$cssResult$=!0,e!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=s.get(this.cssText);return e&&void 0===t&&(s.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const o=(t,...e)=>{const s=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return new r(s,i)},n=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new r("string"==typeof t?t:t+"",i))(e)})(t):t
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */;var a;const l=window.trustedTypes,c=l?l.emptyScript:"",h=window.reactiveElementPolyfillSupport,d={toAttribute(t,e){switch(e){case Boolean:t=t?c:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},u=(t,e)=>e!==t&&(e==e||t==t),p={attribute:!0,type:String,converter:d,reflect:!1,hasChanged:u};class g extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const s=this._$Eh(i,e);void 0!==s&&(this._$Eu.set(s,i),t.push(s))})),t}static createProperty(t,e=p){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,s=this.getPropertyDescriptor(t,i,e);void 0!==s&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const r=this[t];this[e]=s,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||p}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(n(t))}else void 0!==t&&e.push(n(t));return e}static _$Eh(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const i=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,i)=>{e?t.adoptedStyleSheets=i.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):i.forEach((e=>{const i=document.createElement("style"),s=window.litNonce;void 0!==s&&i.setAttribute("nonce",s),i.textContent=e.cssText,t.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$ES(t,e,i=p){var s,r;const o=this.constructor._$Eh(t,i);if(void 0!==o&&!0===i.reflect){const n=(null!==(r=null===(s=i.converter)||void 0===s?void 0:s.toAttribute)&&void 0!==r?r:d.toAttribute)(e,i.type);this._$Ei=t,null==n?this.removeAttribute(o):this.setAttribute(o,n),this._$Ei=null}}_$AK(t,e){var i,s,r;const o=this.constructor,n=o._$Eu.get(t);if(void 0!==n&&this._$Ei!==n){const t=o.getPropertyOptions(n),a=t.converter,l=null!==(r=null!==(s=null===(i=a)||void 0===i?void 0:i.fromAttribute)&&void 0!==s?s:"function"==typeof a?a:null)&&void 0!==r?r:d.fromAttribute;this._$Ei=n,this[n]=l(e,t.type),this._$Ei=null}}requestUpdate(t,e,i){let s=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||u)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var f;g.finalized=!0,g.elementProperties=new Map,g.elementStyles=[],g.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:g}),(null!==(a=globalThis.reactiveElementVersions)&&void 0!==a?a:globalThis.reactiveElementVersions=[]).push("1.3.1");const m=globalThis.trustedTypes,v=m?m.createPolicy("lit-html",{createHTML:t=>t}):void 0,b=`lit$${(Math.random()+"").slice(9)}$`,y="?"+b,x=`<${y}>`,w=document,k=(t="")=>w.createComment(t),$=t=>null===t||"object"!=typeof t&&"function"!=typeof t,A=Array.isArray,S=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_=/-->/g,C=/>/g,E=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,L=/'/g,P=/"/g,F=/^(?:script|style|textarea|title)$/i,z=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),O=Symbol.for("lit-noChange"),j=Symbol.for("lit-nothing"),M=new WeakMap,T=w.createTreeWalker(w,129,null,!1),N=(t,e)=>{const i=t.length-1,s=[];let r,o=2===e?"<svg>":"",n=S;for(let e=0;e<i;e++){const i=t[e];let a,l,c=-1,h=0;for(;h<i.length&&(n.lastIndex=h,l=n.exec(i),null!==l);)h=n.lastIndex,n===S?"!--"===l[1]?n=_:void 0!==l[1]?n=C:void 0!==l[2]?(F.test(l[2])&&(r=RegExp("</"+l[2],"g")),n=E):void 0!==l[3]&&(n=E):n===E?">"===l[0]?(n=null!=r?r:S,c=-1):void 0===l[1]?c=-2:(c=n.lastIndex-l[2].length,a=l[1],n=void 0===l[3]?E:'"'===l[3]?P:L):n===P||n===L?n=E:n===_||n===C?n=S:(n=E,r=void 0);const d=n===E&&t[e+1].startsWith("/>")?" ":"";o+=n===S?i+x:c>=0?(s.push(a),i.slice(0,c)+"$lit$"+i.slice(c)+b+d):i+b+(-2===c?(s.push(void 0),e):d)}const a=o+(t[i]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==v?v.createHTML(a):a,s]};class R{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let r=0,o=0;const n=t.length-1,a=this.parts,[l,c]=N(t,e);if(this.el=R.createElement(l,i),T.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=T.nextNode())&&a.length<n;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(b)){const i=c[o++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+"$lit$").split(b),e=/([.?@])?(.*)/.exec(i);a.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?I:"?"===e[1]?q:"@"===e[1]?X:B})}else a.push({type:6,index:r})}for(const e of t)s.removeAttribute(e)}if(F.test(s.tagName)){const t=s.textContent.split(b),e=t.length-1;if(e>0){s.textContent=m?m.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],k()),T.nextNode(),a.push({type:2,index:++r});s.append(t[e],k())}}}else if(8===s.nodeType)if(s.data===y)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=s.data.indexOf(b,t+1));)a.push({type:7,index:r}),t+=b.length-1}r++}}static createElement(t,e){const i=w.createElement("template");return i.innerHTML=t,i}}function U(t,e,i=t,s){var r,o,n,a;if(e===O)return e;let l=void 0!==s?null===(r=i._$Cl)||void 0===r?void 0:r[s]:i._$Cu;const c=$(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,i,s)),void 0!==s?(null!==(n=(a=i)._$Cl)&&void 0!==n?n:a._$Cl=[])[s]=l:i._$Cu=l),void 0!==l&&(e=U(t,l._$AS(t,e.values),l,s)),e}class H{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:i},parts:s}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:w).importNode(i,!0);T.currentNode=r;let o=T.nextNode(),n=0,a=0,l=s[0];for(;void 0!==l;){if(n===l.index){let e;2===l.type?e=new Y(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new G(o,this,t)),this.v.push(e),l=s[++a]}n!==(null==l?void 0:l.index)&&(o=T.nextNode(),n++)}return r}m(t){let e=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class Y{constructor(t,e,i,s){var r;this.type=2,this._$AH=j,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cg=null===(r=null==s?void 0:s.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=U(this,t,e),$(t)?t===j||null==t||""===t?(this._$AH!==j&&this._$AR(),this._$AH=j):t!==this._$AH&&t!==O&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):(t=>{var e;return A(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.S(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==j&&$(this._$AH)?this._$AA.nextSibling.data=t:this.k(w.createTextNode(t)),this._$AH=t}T(t){var e;const{values:i,_$litType$:s}=t,r="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=R.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.m(i);else{const t=new H(r,this),e=t.p(this.options);t.m(i),this.k(e),this._$AH=t}}_$AC(t){let e=M.get(t.strings);return void 0===e&&M.set(t.strings,e=new R(t)),e}S(t){A(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const r of t)s===e.length?e.push(i=new Y(this.A(k()),this.A(k()),this,this.options)):i=e[s],i._$AI(r),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class B{constructor(t,e,i,s,r){this.type=1,this._$AH=j,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=j}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const r=this.strings;let o=!1;if(void 0===r)t=U(this,t,e,0),o=!$(t)||t!==this._$AH&&t!==O,o&&(this._$AH=t);else{const s=t;let n,a;for(t=r[0],n=0;n<r.length-1;n++)a=U(this,s[i+n],e,n),a===O&&(a=this._$AH[n]),o||(o=!$(a)||a!==this._$AH[n]),a===j?t=j:t!==j&&(t+=(null!=a?a:"")+r[n+1]),this._$AH[n]=a}o&&!s&&this.C(t)}C(t){t===j?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class I extends B{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===j?void 0:t}}const D=m?m.emptyScript:"";class q extends B{constructor(){super(...arguments),this.type=4}C(t){t&&t!==j?this.element.setAttribute(this.name,D):this.element.removeAttribute(this.name)}}class X extends B{constructor(t,e,i,s,r){super(t,e,i,s,r),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=U(this,t,e,0))&&void 0!==i?i:j)===O)return;const s=this._$AH,r=t===j&&s!==j||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==j&&(s===j||r);r&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class G{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){U(this,t)}}const W=window.litHtmlPolyfillSupport;
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var Z,V;null==W||W(R,Y),(null!==(f=globalThis.litHtmlVersions)&&void 0!==f?f:globalThis.litHtmlVersions=[]).push("2.2.1");class J extends g{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,e,i)=>{var s,r;const o=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:e;let n=o._$litPart$;if(void 0===n){const t=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:null;o._$litPart$=n=new Y(e.insertBefore(k(),t),t,void 0,null!=i?i:{})}return n._$AI(t),n})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return O}}J.finalized=!0,J._$litElement$=!0,null===(Z=globalThis.litElementHydrateSupport)||void 0===Z||Z.call(globalThis,{LitElement:J});const K=globalThis.litElementPolyfillSupport;null==K||K({LitElement:J}),(null!==(V=globalThis.litElementVersions)&&void 0!==V?V:globalThis.litElementVersions=[]).push("3.2.0");class Q extends J{constructor(t={}){var e,i,s;super(),this.volume=null!==(e=t.volume)&&void 0!==e?e:0,this.backgroundColor=null!==(i=t.backgroundColor)&&void 0!==i?i:"#69ce2b",this.count=null!==(s=t.count)&&void 0!==s?s:10}static get styles(){return o`

      :host {
        width: 100%;
      }

      #wrapper{
        width: 100%;
      }

      `}static get properties(){return{volume:{type:Number},count:{type:Number},backgroundColor:{type:String,reflect:!0}}}willUpdate(t){t.has("volume")&&(!this.volume||this.volume<0?this.volume=0:this.volume>1&&(this.volume=1))}render(){var t;const e=Math.round(this.count*(null!==(t=this.volume)&&void 0!==t?t:0));return z`
      <style>
        .target{
          width: calc(${100/this.count}% - 10px);
          height: 10px;
          display: inline-block;
          margin: 5px;
          background-color: #e6e7e8;
        }

        .active {
          background-color: ${this.backgroundColor};
        }
        
      </style>

        <div id="wrapper">
          ${Array.from({length:this.count},((t,i)=>z`<div class=${i<e?"target active":"target"}></div>`))}
        </div>
    `}}customElements.define("visualscript-audio-volume",Q);var tt=Object.freeze({__proto__:null,Volume:Q});class et extends J{constructor(t={}){super(),this.source=t.source,this.autoplay=t.autoplay,this.controls=t.controls}static get styles(){return o`

      video {
        width: 100%;
      }

      `}static get properties(){return{source:{converter:{toAttribute:t=>t,fromAttribute:t=>t}},autoplay:{type:Boolean},controls:{type:Boolean}}}willUpdate(t){}render(){let t=document.createElement("video");if("object"==typeof this.source)t.srcObject=this.source;else if(this.source){const e=document.createElement("source");e.src=this.source,t.insertAdjacentElement("beforeend",e)}return this.autoplay&&(t.autoplay=this.autoplay),this.controls&&(t.controls=this.controls),t}}customElements.define("visualscript-video-player",et);var it=Object.freeze({__proto__:null,Player:et});function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function rt(t){return function(t){if(Array.isArray(t))return st(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return st(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?st(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nt(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function at(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class lt{constructor(t,e,i,s){this.r=t,this.g=e,this.b=i,this.a=s}}class ct extends class{constructor(){this.scaleX=1,this.scaleY=1,this.offsetX=0,this.offsetY=0,this.loop=!1,this._vbuffer=0,this._coord=0,this.visible=!0,this.intensity=1,this.xy=new Float32Array([]),this.numPoints=0,this.color=new lt(0,0,0,1),this.webglNumPoints=0}}{constructor(t,e){super(),this.currentIndex=0,this.webglNumPoints=e,this.numPoints=e,this.color=t,this.xy=new Float32Array(2*this.webglNumPoints)}setX(t,e){this.xy[2*t]=e}setY(t,e){this.xy[2*t+1]=e}getX(t){return this.xy[2*t]}getY(t){return this.xy[2*t+1]}lineSpaceX(t,e){for(let i=0;i<this.numPoints;i++)this.setX(i,t+e*i)}arrangeX(){this.lineSpaceX(-1,2/this.numPoints)}constY(t){for(let e=0;e<this.numPoints;e++)this.setY(e,t)}shiftAdd(t){const e=t.length;for(let t=0;t<this.numPoints-e;t++)this.setY(t,this.getY(t+e));for(let i=0;i<e;i++)this.setY(i+this.numPoints-e,t[i])}addArrayY(t){if(this.currentIndex+t.length<=this.numPoints)for(let e=0;e<t.length;e++)this.setY(this.currentIndex,t[e]),this.currentIndex++}replaceArrayY(t){if(t.length==this.numPoints)for(let e=0;e<this.numPoints;e++)this.setY(e,t[e])}}class ht{constructor(t,e){this.debug=!1,this.addLine=this.addDataLine,null==e?this.webgl=t.getContext("webgl",{antialias:!0,transparent:!1}):(this.webgl=t.getContext("webgl",{antialias:e.antialias,transparent:e.transparent,desynchronized:e.deSync,powerPerformance:e.powerPerformance,preserveDrawing:e.preserveDrawing}),this.debug=null!=e.debug&&e.debug),this.log("canvas type is: "+t.constructor.name),this.log(`[webgl-plot]:width=${t.width}, height=${t.height}`),this._linesData=[],this._linesAux=[],this._thickLines=[],this._surfaces=[],this.gScaleX=1,this.gScaleY=1,this.gXYratio=1,this.gOffsetX=0,this.gOffsetY=0,this.gLog10X=!1,this.gLog10Y=!1,this.webgl.clear(this.webgl.COLOR_BUFFER_BIT),this.webgl.viewport(0,0,t.width,t.height),this._progLine=this.webgl.createProgram(),this.initThinLineProgram(),this.webgl.enable(this.webgl.BLEND),this.webgl.blendFunc(this.webgl.SRC_ALPHA,this.webgl.ONE_MINUS_SRC_ALPHA)}get linesData(){return this._linesData}get linesAux(){return this._linesAux}get thickLines(){return this._thickLines}get surfaces(){return this._surfaces}_drawLines(t){const e=this.webgl;t.forEach((t=>{if(t.visible){e.useProgram(this._progLine);const i=e.getUniformLocation(this._progLine,"uscale");e.uniformMatrix2fv(i,!1,new Float32Array([t.scaleX*this.gScaleX*(this.gLog10X?1/Math.log(10):1),0,0,t.scaleY*this.gScaleY*this.gXYratio*(this.gLog10Y?1/Math.log(10):1)]));const s=e.getUniformLocation(this._progLine,"uoffset");e.uniform2fv(s,new Float32Array([t.offsetX+this.gOffsetX,t.offsetY+this.gOffsetY]));const r=e.getUniformLocation(this._progLine,"is_log");e.uniform2iv(r,new Int32Array([this.gLog10X?1:0,this.gLog10Y?1:0]));const o=e.getUniformLocation(this._progLine,"uColor");e.uniform4fv(o,[t.color.r,t.color.g,t.color.b,t.color.a]),e.bufferData(e.ARRAY_BUFFER,t.xy,e.STREAM_DRAW),e.drawArrays(t.loop?e.LINE_LOOP:e.LINE_STRIP,0,t.webglNumPoints)}}))}_drawSurfaces(t){const e=this.webgl;t.forEach((t=>{if(t.visible){e.useProgram(this._progLine);const i=e.getUniformLocation(this._progLine,"uscale");e.uniformMatrix2fv(i,!1,new Float32Array([t.scaleX*this.gScaleX*(this.gLog10X?1/Math.log(10):1),0,0,t.scaleY*this.gScaleY*this.gXYratio*(this.gLog10Y?1/Math.log(10):1)]));const s=e.getUniformLocation(this._progLine,"uoffset");e.uniform2fv(s,new Float32Array([t.offsetX+this.gOffsetX,t.offsetY+this.gOffsetY]));const r=e.getUniformLocation(this._progLine,"is_log");e.uniform2iv(r,new Int32Array([this.gLog10X?1:0,this.gLog10Y?1:0]));const o=e.getUniformLocation(this._progLine,"uColor");e.uniform4fv(o,[t.color.r,t.color.g,t.color.b,t.color.a]),e.bufferData(e.ARRAY_BUFFER,t.xy,e.STREAM_DRAW),e.drawArrays(e.TRIANGLE_STRIP,0,t.webglNumPoints)}}))}_drawTriangles(t){const e=this.webgl;e.bufferData(e.ARRAY_BUFFER,t.xy,e.STREAM_DRAW),e.useProgram(this._progLine);const i=e.getUniformLocation(this._progLine,"uscale");e.uniformMatrix2fv(i,!1,new Float32Array([t.scaleX*this.gScaleX*(this.gLog10X?1/Math.log(10):1),0,0,t.scaleY*this.gScaleY*this.gXYratio*(this.gLog10Y?1/Math.log(10):1)]));const s=e.getUniformLocation(this._progLine,"uoffset");e.uniform2fv(s,new Float32Array([t.offsetX+this.gOffsetX,t.offsetY+this.gOffsetY]));const r=e.getUniformLocation(this._progLine,"is_log");e.uniform2iv(r,new Int32Array([0,0]));const o=e.getUniformLocation(this._progLine,"uColor");e.uniform4fv(o,[t.color.r,t.color.g,t.color.b,t.color.a]),e.drawArrays(e.TRIANGLE_STRIP,0,t.xy.length/2)}_drawThickLines(){this._thickLines.forEach((t=>{if(t.visible){const e=Math.min(this.gScaleX,this.gScaleY);t.setActualThickness(t.getThickness()/e),t.convertToTriPoints(),this._drawTriangles(t)}}))}update(){this.clear(),this.draw()}draw(){this._drawLines(this.linesData),this._drawLines(this.linesAux),this._drawThickLines(),this._drawSurfaces(this.surfaces)}clear(){this.webgl.clear(this.webgl.COLOR_BUFFER_BIT)}_addLine(t){t._vbuffer=this.webgl.createBuffer(),this.webgl.bindBuffer(this.webgl.ARRAY_BUFFER,t._vbuffer),this.webgl.bufferData(this.webgl.ARRAY_BUFFER,t.xy,this.webgl.STREAM_DRAW),t._coord=this.webgl.getAttribLocation(this._progLine,"coordinates"),this.webgl.vertexAttribPointer(t._coord,2,this.webgl.FLOAT,!1,0,0),this.webgl.enableVertexAttribArray(t._coord)}addDataLine(t){this._addLine(t),this.linesData.push(t)}addAuxLine(t){this._addLine(t),this.linesAux.push(t)}addThickLine(t){this._addLine(t),this._thickLines.push(t)}addSurface(t){this._addLine(t),this.surfaces.push(t)}initThinLineProgram(){const t=this.webgl.createShader(this.webgl.VERTEX_SHADER);this.webgl.shaderSource(t,"\n      attribute vec2 coordinates;\n      uniform mat2 uscale;\n      uniform vec2 uoffset;\n      uniform ivec2 is_log;\n\n      void main(void) {\n         float x = (is_log[0]==1) ? log(coordinates.x) : coordinates.x;\n         float y = (is_log[1]==1) ? log(coordinates.y) : coordinates.y;\n         vec2 line = vec2(x, y);\n         gl_Position = vec4(uscale*line + uoffset, 0.0, 1.0);\n      }"),this.webgl.compileShader(t);const e=this.webgl.createShader(this.webgl.FRAGMENT_SHADER);this.webgl.shaderSource(e,"\n         precision mediump float;\n         uniform highp vec4 uColor;\n         void main(void) {\n            gl_FragColor =  uColor;\n         }"),this.webgl.compileShader(e),this._progLine=this.webgl.createProgram(),this.webgl.attachShader(this._progLine,t),this.webgl.attachShader(this._progLine,e),this.webgl.linkProgram(this._progLine)}popDataLine(){this.linesData.pop()}removeAllLines(){this._linesData=[],this._linesAux=[],this._thickLines=[],this._surfaces=[]}removeDataLines(){this._linesData=[]}removeAuxLines(){this._linesAux=[]}viewport(t,e,i,s){this.webgl.viewport(t,e,i,s)}log(t){this.debug&&console.log("[webgl-plot]:"+t)}}var dt=function(){function t(e){var i=this,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(ot(this,t),at(this,"updateAllLines",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=!0,a=rt(s);e.forEach((function(e,s){var l,c;e.length!==(null===(l=i.linesY[s])||void 0===l?void 0:l.length)?(e.length>(null===(c=i.linesY[s])||void 0===c?void 0:c.length)?i.linesY[s]=t.downsample(e,i.linesY[s].length):i.linesY[s]=t.upsample(e,i.linesY[s]),a[s]=Math.ceil(e.length/i.nSecGraph),r&&(i.linesY[s]=i.autoscale(e,s,i.nLines,o)),n=!1):i.linesY[s]=r?i.autoscale(e,s,i.nLines,o):e})),n||(i.deinitPlot(),i.initPlot(e.length,a)),i.useOverlay&&(i.overlayctx.clearRect(0,0,i.overlay.width,i.overlay.height),i.overlayctx.font="1em Courier",i.overlayctx.fillStyle="white"),i.linesY.forEach((function(t,e){for(var s=0;s<t.length;s++)i.lines[e].setY(s,t[s]);i.useOverlay&&(i.overlayctx.fillText(i.lineSettings[e].ymax.toFixed(2),i.overlay.width-70,i.overlay.height*(e+.1)/i.lines.length),i.overlayctx.fillText(i.lineSettings[e].ymin.toFixed(2),i.overlay.width-70,i.overlay.height*(e+.9)/i.lines.length))}))})),at(this,"updateLine",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.length!==s*i.nSecGraph&&(s=e.length/i.nSecGraph,i.linesSPS[r]=s,i.deinitPlot(),i.initPlot(i.lines.length,i.linesSPS)),e.length!==i.linesY[r].length?(e.length>i.linesY[r].length?i.linesY[r]=t.downsample(e,i.linesY[r].length):i.linesY[r]=t.upsample(e,i.linesY[r]),o&&(i.linesY[r]=i.autoscale(e,r,i.nLines,n))):i.linesY[r]=o?i.autoscale(e,r,i.nLines,n):e;for(var a=0;a<i.linesY[r].length;a++)i.lines[r].setY(a,i.linesY[r][a]);i.useOverlay&&(i.overlayctx.clearRect(0,i.overlay.height*r/i.lines.length,i.overlay.width,i.overlay.height*(r+1)/i.lines.length),i.overlayctx.fillText(i.lineSettings[r].ymax.toFixed(2),i.overlay.width-70,i.overlay.height*(r+.1)/i.lines.length),i.overlayctx.fillText(i.lineSettings[r].ymin.toFixed(2),i.overlay.width-70,i.overlay.height*(r+.9)/i.lines.length))})),!e)throw new Error("Supply a canvas to the webgl plot!");this.canvas=e,this.useOverlay=s,this.overlay,this.overlayctx,this.plot=new ht(e),this.useOverlay&&(this.overlay=document.createElement("canvas"),this.overlay.style=this.canvas.style,this.overlay.width=this.canvas.width,this.overlay.height=this.canvas.height,this.overlay.style.position="absolute",this.overlay.style.zIndex=this.canvas.style.zIndex+1,this.overlayctx=this.overlay.getContext("2d"),this.canvas.parentNode.insertAdjacentElement("afterbegin",this.overlay)),this.lines=[],this.linesY=[],this.linesSPS=[],this.axes=[],this.dividers=[],this.colors=[],this.lineSettings=[],this.axisscalar=1,this.nLines=0,this.nSecGraph=10,this.nMaxPointsPerSec=512,this.animationSpeed=6.9}var e,i,s;return e=t,i=[{key:"autoscale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Math.max.apply(Math,rt(t)),o=Math.min.apply(Math,rt(t));this.lineSettings[e].ymax=r,this.lineSettings[e].ymin=o;var n,a=1/i;if(s){var l=Math.max(Math.abs(o),Math.abs(r));return n=a/l,t.map((function(t){return t*n+(a*(e+1)*2-1-a)}))}return n=a/(r-o),t.map((function(t){return 2*((t-o)*n-1/(2*i))+(a*(e+1)*2-1-a)}))}},{key:"deinitPlot",value:function(){var t,e;null===(t=this.plot)||void 0===t||t.clear(),null===(e=this.plot)||void 0===e||e.removeAllLines()}},{key:"HSLToRGB",value:function(t,e,i){e/=100,i/=100;var s=(1-Math.abs(2*i-1))*e,r=s*(1-Math.abs(t/60%2-1)),o=i-s/2,n=0,a=0,l=0;return 0<=t&&t<60?(n=s,a=r,l=0):60<=t&&t<120?(n=r,a=s,l=0):120<=t&&t<180?(n=0,a=s,l=r):180<=t&&t<240?(n=0,a=r,l=s):240<=t&&t<300?(n=r,a=0,l=s):300<=t&&t<360&&(n=s,a=0,l=r),[n=Math.round(255*(n+o)),a=Math.round(255*(a+o)),l=Math.round(255*(l+o))]}},{key:"initPlot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nSecGraph,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.nMaxPointsPerSec;this.nSecGraph=i,this.nMaxPointsPerSec=s;var r=new lt(1,1,1,.3),o=new lt(1,1,1,1),n=1/t;this.nLines=t,this.lines=[],this.linesSPS=e;for(var a=0;a<t;a++){var l=this.HSLToRGB(a/t*360%360,100,50),c=new lt(l[0],l[1],l[2],1);this.colors.push(c);var h=10;h=e[a]>s?i*s:e[a]*i,h=Math.floor(h);var d=new ct(c,h);d.arrangeX(),this.lines.push(d),this.linesY.length<this.lines.length&&this.linesY.push(new Array(h)),this.plot.addDataLine(d);var u=n*(a+1)*2-1-n,p=new ct(r,2);if(p.constY(u),p.arrangeX(),p.xy[2]=1,this.plot.addAuxLine(p),this.axes.push(p),a!==t-1){var g=n*(a+1)*2-1,f=new ct(o,2);f.constY(g),f.arrangeX(),f.xy[2]=1,this.plot.addAuxLine(f),this.dividers.push(f)}this.lineSettings[a]={color:c,sps:e[a],ymin:-1,ymax:1}}return this.linesY.length>this.lines.length&&this.linesY.splice(this.lines.length),!0}},{key:"update",value:function(){this.plot.update()}},{key:"animate",value:function(){var t=this;this.update(),setTimeout((function(){requestAnimationFrame(t.animate)}),this.animationSpeed)}}],s=[{key:"absmax",value:function(t){return Math.max(Math.abs(Math.min.apply(Math,rt(t))),Math.max.apply(Math,rt(t)))}},{key:"downsample",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t.length>e){for(var s=new Array(e),r=t.length/e,o=t.length-1,n=0,a=0,l=r;l<t.length;l+=r){var c=Math.round(l);c>o&&(c=o);for(var h=n;h<c;h++)s[a]+=t[h];s[a]/=(c-n)*i,a++,n=c}return s}return t}},{key:"upsample",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=function(t,e,s){return(t+(e-t)*s)*i},r=new Array(e),o=new Number((t.length-1)/(e-1));r[0]=t[0];for(var n=1;n<e-1;n++){var a=n*o,l=new Number(Math.floor(a)).toFixed(),c=new Number(Math.ceil(a)).toFixed(),h=a-l;r[n]=s(t[l],t[c],h)}return r[e-1]=t[t.length-1],r}},{key:"test",value:function(e){var i=document.getElementById(e),s=globalThis.devicePixelRatio||1;i.width=i.clientWidth*s,i.height=i.clientHeight*s;var r=512,o=256,n=new Array(1536),a=new Array(768),l=new t(i);function c(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=e*i,r=i/s,o=0,n=0;n<e*i;n++){var a=Math.sin(Math.PI*o*1*Math.PI*2+.001*performance.now()),l=Math.random()-.5;t[n]=.5*a+.5*l,o+=r}}l.initPlot(2,[r,o],3,512),requestAnimationFrame((function t(){c(n,r,3),c(a,o,3),l.updateAllLines([n,a],[r,o],!0),l.update(),requestAnimationFrame(t)}))}}],i&&nt(e.prototype,i),s&&nt(e,s),Object.defineProperty(e,"prototype",{writable:!1}),t}();class ut extends J{constructor(t={seconds:5,sps:512}){var e,i,s;super(),this.data=[],this.spss=[],this.buffers=[],this.updateData=t=>{this.data=t},this.init=()=>{const t=this.data.length;this.sps=60*this.seconds,this.spss=Array.from({length:t},(t=>this.sps)),this.buffers=Array.from({length:t},(t=>[])),this.util.initPlot(t,this.spss,this.seconds,60)},this.clear=()=>{this.util.plot.clear(),this.buffers=[],this.data=[]},this.draw=()=>{this.data.length!=this.buffers.length&&this.init(),this.data.forEach(((t,e)=>{0===this.buffers[e].length?this.buffers[e]=Array.from({length:this.spss[e]},(e=>t)):(Array.isArray(t)||(t=[t]),t.forEach((()=>this.buffers[e].pop())),this.buffers[e].unshift(...t))}))},this.canvas=document.createElement("canvas"),this.util=new dt(this.canvas,!1),this.sps=null!==(e=t.sps)&&void 0!==e?e:512,this.seconds=null!==(i=t.seconds)&&void 0!==i?i:5,this.backgroundColor=null!==(s=t.backgroundColor)&&void 0!==s?s:"#69ce2b";let r=()=>{this.buffers.length>0&&(this.util.updateAllLines(this.buffers,this.spss,!0),this.util.update()),requestAnimationFrame(r)};requestAnimationFrame(r)}static get styles(){return o`

      canvas{
        background: black;
      }

      `}static get properties(){return{data:{type:Array,reflect:!0},sps:{type:Number,reflect:!0},seconds:{type:Number,reflect:!0},backgroundColor:{type:String,reflect:!0}}}willUpdate(t){t.has("data")&&this.draw(),t.has("seconds")&&(this.seconds||(this.seconds=.001),this.init())}render(){return this.canvas}}customElements.define("visualscript-timeseries-stream",ut);class pt extends J{constructor(t={}){var e,i,s;super(),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.reset=!1,this.offset=!0,this.colorScale=["#000000","#030106","#06010c","#090211","#0c0215","#0e0318","#10031b","#12041f","#130522","#140525","#150628","#15072c","#16082f","#160832","#160936","#160939","#17093d","#170a40","#170a44","#170a48","#17094b","#17094f","#170953","#170956","#16085a","#16085e","#150762","#140766","#140669","#13066d","#110571","#100475","#0e0479","#0b037d","#080281","#050185","#020089","#00008d","#000090","#000093","#000096","#000099","#00009c","#00009f","#0000a2","#0000a5","#0000a8","#0000ab","#0000ae","#0000b2","#0000b5","#0000b8","#0000bb","#0000be","#0000c1","#0000c5","#0000c8","#0000cb","#0000ce","#0000d1","#0000d5","#0000d8","#0000db","#0000de","#0000e2","#0000e5","#0000e8","#0000ec","#0000ef","#0000f2","#0000f5","#0000f9","#0000fc","#0803fe","#2615f9","#3520f4","#3f29ef","#4830eb","#4e37e6","#543ee1","#5944dc","#5e49d7","#614fd2","#6554cd","#6759c8","#6a5ec3","#6c63be","#6e68b9","#6f6db4","#7072af","#7177aa","#717ba5","#7180a0","#71859b","#718996","#708e91","#6f928b","#6e9786","#6c9b80","#6aa07b","#68a475","#65a96f","#62ad69","#5eb163","#5ab65d","#55ba56","#4fbf4f","#48c347","#40c73f","#36cc35","#34ce32","#37cf31","#3ad130","#3cd230","#3fd32f","#41d52f","#44d62e","#46d72d","#48d92c","#4bda2c","#4ddc2b","#4fdd2a","#51de29","#53e029","#55e128","#58e227","#5ae426","#5ce525","#5ee624","#60e823","#62e922","#64eb20","#66ec1f","#67ed1e","#69ef1d","#6bf01b","#6df11a","#6ff318","#71f416","#73f614","#75f712","#76f810","#78fa0d","#7afb0a","#7cfd06","#7efe03","#80ff00","#85ff00","#89ff00","#8eff00","#92ff00","#96ff00","#9aff00","#9eff00","#a2ff00","#a6ff00","#aaff00","#adff00","#b1ff00","#b5ff00","#b8ff00","#bcff00","#bfff00","#c3ff00","#c6ff00","#c9ff00","#cdff00","#d0ff00","#d3ff00","#d6ff00","#daff00","#ddff00","#e0ff00","#e3ff00","#e6ff00","#e9ff00","#ecff00","#efff00","#f3ff00","#f6ff00","#f9ff00","#fcff00","#ffff00","#fffb00","#fff600","#fff100","#ffec00","#ffe700","#ffe200","#ffdd00","#ffd800","#ffd300","#ffcd00","#ffc800","#ffc300","#ffbe00","#ffb900","#ffb300","#ffae00","#ffa900","#ffa300","#ff9e00","#ff9800","#ff9300","#ff8d00","#ff8700","#ff8100","#ff7b00","#ff7500","#ff6f00","#ff6800","#ff6100","#ff5a00","#ff5200","#ff4900","#ff4000","#ff3600","#ff2800","#ff1500","#ff0004","#ff000c","#ff0013","#ff0019","#ff001e","#ff0023","#ff0027","#ff002b","#ff012f","#ff0133","#ff0137","#ff013b","#ff023e","#ff0242","#ff0246","#ff0349","#ff034d","#ff0450","#ff0454","#ff0557","#ff065b","#ff065e","#ff0762","#ff0865","#ff0969","#ff0a6c","#ff0a70","#ff0b73","#ff0c77","#ff0d7a","#ff0e7e","#ff0f81","#ff1085","#ff1188","#ff128c","#ff138f","#ff1493"],this.data=[],this.dynNormalize=!0,this.init=()=>{this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.offscreenctx.fillStyle="black",this.offscreenctx.fillRect(0,0,this.canvas.width,this.canvas.height)},this.updateData=t=>{this.data=t},this.onresize=()=>{var t,e,i,s;const r=null===(t=this.canvas.parentNode)||void 0===t?void 0:t.clientWidth,o=null===(e=this.canvas.parentNode)||void 0===e?void 0:e.clientHeight;r&&(this.canvas.width=null===(i=this.canvas.parentNode)||void 0===i?void 0:i.clientWidth,this.canvas.style.width=r.toString()),o&&(this.canvas.height=null===(s=this.canvas.parentNode)||void 0===s?void 0:s.clientHeight,this.canvas.style.height=o.toString())},this.draw=()=>{var t=this.canvas.width,e=Math.floor(this.canvas.height),i=this.offscreenctx,s=i.canvas;i.drawImage(this.canvas,0,0,t,e);var r=[...Array.from(this.data)];if(r.length!==e){var o=r;r=this.interpolateArray(o,e)}var n=0;!0===this.offset&&(n=Math.pow(10,Math.floor(Math.log10(Math.min(...r))))),!0===this.dynNormalize&&(this.normalizeFactor=1/Math.pow(10,Math.floor(Math.log10(Math.max(...r))+.5)));for(var a=0;a<r.length;a++){var l=Math.floor((r[a]-n)*this.normalizeFactor*255);l>255?l=255:l<0&&(l=0),this.ctx.fillStyle=this.colorScale[l],this.ctx.fillRect(t-1,e-a,1,1)}!1===this.reset?(this.ctx.translate(-1,0),this.ctx.drawImage(s,0,0,t,e),this.ctx.setTransform(1,0,0,1,0,0)):this.reset=!1},this.max=null!==(e=t.max)&&void 0!==e?e:1,this.normalizeFactor=t.max?1/t.max:1,this.backgroundColor=null!==(i=t.backgroundColor)&&void 0!==i?i:"#69ce2b",window.addEventListener("resize",(()=>{this.onresize()})),this.offscreen=new OffscreenCanvas(this.canvas.width,this.canvas.height),this.offscreenctx=this.offscreen.getContext("2d"),this.init(),this.data=null!==(s=t.data)&&void 0!==s?s:new Array(this.canvas.height).fill(0),this.onresize()}static get styles(){return o`

      canvas{
        background: black;
      }

      `}static get properties(){return{max:{type:Number,reflect:!0},data:{type:Array,reflect:!0},backgroundColor:{type:String,reflect:!0}}}willUpdate(t){t.has("data")&&this.draw()}interpolateArray(t,e){var i=this.canvas.height/t.length,s=function(t,e,s){return(t+(e-t)*s)*i},r=new Array,o=new Number((t.length-1)/(e-1));r[0]=t[0];for(var n=1;n<e-1;n++){var a=n*o,l=new Number(Math.floor(a)),c=l.toFixed(),h=new Number(Math.ceil(a)).toFixed(),d=a-l;r[n]=s(t[c],t[h],d)}return r[e-1]=t[t.length-1],r}render(){return this.canvas}}customElements.define("visualscript-spectrogram-stream",pt);var gt=Object.freeze({__proto__:null,TimeSeries:ut,Spectrogram:pt}),ft=Object.freeze({__proto__:null,audio:tt,video:it,data:gt});class mt extends J{constructor(t={brand:{},primary:{menu:[],options:[]},secondary:[]}){var e,i,s,r;super(),this.getElement=t=>"button"===t.type?z`<a href="${t.link}" target=${t.external?"_blank":"_self"}><button>${t.content}</button></a>`:z`<a href="${t.link}" target=${t.external?"_blank":"_self"} class="decorate">${t.content}</a>`,this.primary=null!==(e=t.primary)&&void 0!==e?e:{menu:[],options:[]},this.secondary=null!==(i=t.secondary)&&void 0!==i?i:[],this.color=null!==(s=t.color)&&void 0!==s?s:"blue",this.brand=null!==(r=t.brand)&&void 0!==r?r:{content:"My Brand"}}static get styles(){return o`

    
    :host {
      z-index: 2;
      border-bottom: 1px solid rgb(180,180,180);
      background: white;
      color: black;
      display:flex;
      align-items: center;
      width: 100%;
      grid-area: nav;
      z-index: 100;
    }

    header {
      width: 100%;
    }

    :host * {
      box-sizing: border-box;
    }
    
    h1 {
      margin: 0;
    }

    nav {
      width: 100%;
      padding:  0px 25px;
      display: flex;
      align-items: center;
    }

    #primary {
      position: sticky; 
      top: 0;
      left: 0;
      height: 70px;
      max-height: 100px;
      justify-content: space-between;
      font-size: 80%;
    }

    #primary > * {
      flex-grow: 1;
      display: flex;
    }

    #primary > div:lastchild {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-direction: row-reverse;
    }

    #menu, #options {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #secondary {
      height: 50px;
      justify-content: flex-end;
      border-bottom: 1px solid #3d3d3d;
      font-size: 75%;
    }

    a{
      color: black;
      text-decoration: none;
    }

    .brand {
      padding-right: 15px;
    }

    a:not(.brand) {
      height: 100%;
      display: flex;
      align-items: center; 
      justify-content: center;
      text-align: center;
    }

    .decorate {
      padding: 10px 15px;
    }

    #primary .decorate:hover {
      box-shadow: 0 4px 0 #0fb3ff inset;
    }

    #secondary .decorate:hover {
      box-shadow: 0 3px 0 #c4c4c4 inset;
    }

    button {
      border: 1px solid white;
      border-radius: 3px;
      background: transparent;
      padding: 5px 10px;
      margin-left: 10px;
      font-size: 95%;
    }
    
    nav button:last-child {
      margin-right: 0px;
    }

    button:hover {
      outline: 1.1px solid white;
      cursor: pointer;
    }

    @media only screen and (max-width: 800px) {
      #primary #menu {
        display: none;
      }
    }

    @media (prefers-color-scheme: dark) {
      :host {
        background: #060606;
        color: white;
      }

      a {
        color: white;
      }
    }

    `}static get properties(){return{primary:{type:Object},secondary:{type:Array,reflect:!0},brand:{type:Object},color:{type:String,reflect:!0}}}willUpdate(t){t.has("primary")}render(){var t,e,i;return z`
      <header>
      ${this.secondary.length>0?z`<nav id="secondary">${null===(t=this.secondary)||void 0===t?void 0:t.map((t=>this.getElement(t)))}</nav>`:""}
      <nav id="primary">
      ${z`<div><a class="brand" target=${this.brand.external?"_blank":"_self"} href=${this.brand.link}>${this.brand.content?/(jpg|gif|png|JPG|GIF|PNG|JPEG|jpeg)$/.test(this.brand.content)?z`<img src="${this.brand.content}"></img>`:z`<h1>${this.brand.content}</h1><slot></slot>`:z`<h1><slot></slot></h1>`}</a></div>`}
        <div>
          <div id="options">
          ${null===(e=this.primary.options)||void 0===e?void 0:e.map((t=>this.getElement(t)))}
          </div>
          <div id="menu">
            ${null===(i=this.primary.menu)||void 0===i?void 0:i.map((t=>this.getElement(t)))}
          </div>
        </div>

      </nav>
      </header>
    `}}customElements.define("visualscript-nav",mt);class vt extends J{constructor(t={}){var e,i,s,r;super(),this.progress=t.progress,this.color=t.color,this.background=null!==(e=t.background)&&void 0!==e?e:"#f3f3f3",this.type=null!==(i=t.type)&&void 0!==i?i:"default",this.showPercent=null===(s=t.showPercent)||void 0===s||s,this.text=t.text,this.textBackground=t.textBackground,this.textColor=t.textColor,this.size=null!==(r=t.size)&&void 0!==r?r:"13px",this.color||("default"===this.type?this.color="blue":this.color="#7aff80")}static get styles(){return o`
    
    :host {
      
    }

    #container {  
      width: 100%;
    }

    #indicator { 
      width: 100%;
      overflow: hidden;
      animate: 0.5s;
      opacity: 0.7;
    }

    #indicator > div {
      width: 100%;
      height: 100%;
    }

    #linear-text {  
      padding: 10px 15px;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
      font-size: 75%;
      background: white;
    }

    .loader-container {
      width: 80px;
      height: 80px;
      position: relative;
      color: #5b5b5b;
    }

    .loader {
      width: 100%;
      height: 100%;
      border: 4px solid;
      background: white;
      border-right: none;
      border-top: none;
      border-left: none;
      z-index: 2000;
      background-color: transparent;
      border-radius: 100%;
      transform: rotateZ(0);
    }

    .loader-container > span{
      position: absolute;
      top: 50%;
      left: 50%;
      font-size: 80%;
      transform: translate(-50%, -50%);
      user-select: none;
    }

    .loader.active {
      opacity: 0.45;
      -webkit-animation: spin 2s linear infinite;
      animation: spin 2s linear infinite;
    }

    /* @-moz-keyframes spin {  . . . } */
    
    
    /* @-ms-keyframes spin {  . . . } */
    
    
    /* @-o-keyframes spin { . . . } */
    
    @-webkit-keyframes spin {
      from {
        transform: rotateZ(0deg) scale(1);
      }
      50% {
        transform: rotateZ(540deg) scale(0.9);
        filter: brightness(50%);        
      }
      to {
        transform: rotateZ(1080deg) scale(1);
      }
    }
    
    @keyframes spin {
      from {
        transform: rotateZ(0deg) scale(1);
      }
      50% {
        transform: rotateZ(540deg) scale(0.9);
        filter: brightness(50%);
      }
      to {
        transform: rotateZ(1080deg) scale(1);
      }
    }
    `}static get properties(){return{progress:{type:Number,reflect:!0},text:{type:String,reflect:!0},type:{type:String,reflect:!0},color:{type:String,reflect:!0},background:{type:String,reflect:!0},textBackground:{type:String,reflect:!0},textColor:{type:String,reflect:!0},size:{type:String,reflect:!0}}}willUpdate(t){}render(){var t;const e=null!==(t=this.progress)&&void 0!==t?t:0,i=null!=this.text?this.text:this.showPercent?`${(100*e).toFixed(1)}%`:"";return"linear"===this.type?z`
            ${i?z`<div id="linear-text" style="background: ${this.textBackground}; color: ${this.textColor};">${i}</div>`:""}
            <div id="indicator" style="height:${this.size}; background:${this.background}; opacity:${1===e?1:""};">
                <div style="width:${100*e}%; background: ${this.color}"></div>
              </div>
            `:z`
            <div class="loader-container" style="height:${this.size}; width:${this.size}; background: ${this.textBackground};">
              ${i?z`<span style="color: ${this.textColor};">${i}</span>`:""}
              <div class="loader active" style="border-color: ${this.color};"></div>
            </div>
            `}}customElements.define("visualscript-loader",vt);
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const bt=1,yt=t=>(...e)=>({_$litDirective$:t,values:e});class xt{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}
/**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const wt=yt(class extends xt{constructor(t){var e;if(super(t),t.type!==bt||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const s=t[i];return null==s?e:e+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.ct){this.ct=new Set;for(const t in e)this.ct.add(t);return this.render(e)}this.ct.forEach((t=>{null==e[t]&&(this.ct.delete(t),t.includes("-")?i.removeProperty(t):i[t]="")}));for(const t in e){const s=e[t];null!=s&&(this.ct.add(t),t.includes("-")?i.setProperty(t,s):i[t]=s)}return O}});class kt extends J{constructor(t={}){super(),this.primary=t.primary,this.backgroundColor=t.backgroundColor,this.size=t.size,this.onClick=t.onClick}static get styles(){return o`

    .storybook-button {
      font-weight: 700;
      border: 0;
      border-radius: 1em;
      cursor: pointer;
      display: inline-block;
      line-height: 1;
      overflow: hidden;
    }

    .storybook-button--primary {
      color: white;
      background-color: #1ea7fd;
    }
    .storybook-button--secondary {
      color: #333;
      background-color: transparent;
      box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px inset;
    }
    .storybook-button--extra-small {
      font-size: 10px;
      padding: 7px 12px;
    }

    .storybook-button--small {
      font-size: 12px;
      padding: 10px 16px;
    }
    .storybook-button--medium {
      font-size: 14px;
      padding: 11px 20px;
    }
    .storybook-button--large {
      font-size: 16px;
      padding: 12px 24px;
    }


    @media (prefers-color-scheme: dark) {
      .storybook-button--secondary {
        color: #cccccc;
        background-color: transparent;
        box-shadow: rgba(255, 255, 255, 0.50) 0px 0px 0px 1px inset;
      }
    }

    `}static get properties(){return{primary:{type:Boolean,reflect:!0},backgroundColor:{type:String,reflect:!0},size:{type:String,reflect:!0},onClick:{type:Function,reflect:!0}}}willUpdate(t){}render(){const t=this.primary?"storybook-button--primary":"storybook-button--secondary";return z`
      <button
           type="button"
            class=${["storybook-button",`storybook-button--${this.size||"medium"}`,t].join(" ")}
            style=${wt({backgroundColor:this.backgroundColor})}
            @click=${this.onClick}
      >
        <slot>Button</slot>
      </button>
    `}}customElements.define("visualscript-button",kt);class $t extends J{constructor(t={}){super(),this.toggle=()=>this.open=!this.open,this.open=t.open,this.header=t.header,this.footer=t.footer}static get styles(){return o`
/* Modal Header */

  :host {
    
    z-index: 101;
  }
  
  :host * {
    box-sizing: border-box;
    
  }

.modal-header {
  padding: 12px 16px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  border-bottom: 1px solid #e3e3e3;
}

.modal-header span {
  font-weight: 800;
  font-size: 120%;
}


/* Modal Body */
.modal-body {
  padding: 16px;
  overflow: scroll;
  width: 100%;
  flex-grow: 1;
}

/* Modal Footer */
.modal-footer {
  border-top: 1px solid #e3e3e3;
  padding: 12px 16px;
  width: 100%;
}

.modal-footer span {
  font-size: 80%;
}

/* Modal Content */
.modal-content {
  
  position: absolute;
  bottom: 50%;
  left: 50%;
  transform: translate(-50%, 50%);

  background-color: #fefefe;
  margin: auto;
  border-radius: 4px;
  padding: 0;
  width: 80vw;
  height: 80vh;
  box-shadow: 0 1px 5px 0 rgb(0 0 0 / 20%);
  transition: opacity 0.5s;
  display: flex; 
  align-items: center;
  justify-content: space-between;
  flex-direction: column;
  pointer-events: none;
  z-index: 102;
  opacity: 0;
}

.modal-content.open {
  opacity: 1;
  pointer-events: all;
}

    `}static get properties(){return{open:{type:Boolean,reflect:!0},header:{type:Object,reflect:!0},footer:{type:String,reflect:!0}}}willUpdate(t){}render(){return z`
      <div class="modal-content ${this.open?"open":""}">
        ${this.header?z`<div class="modal-header">
          <span>${this.header}</span>
          <visualscript-button secondary size="extra-small" @click="${this.toggle}">Close</visualscript-button>
        </div>`:""}
        <div class="modal-body">
          <slot>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas fringilla dolor vitae hendrerit feugiat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Integer ultricies arcu nec nibh commodo aliquam at in felis. Mauris lorem dui, porttitor et lectus vel, ornare sodales risus. Sed eu rhoncus ex. Donec tristique nibh lacus, sed dictum lacus lacinia eu. Nunc imperdiet a ante et feugiat. Praesent euismod tortor lacus, et euismod turpis mollis vitae. Etiam sagittis vehicula pulvinar. Aliquam id tincidunt tortor, sed feugiat nulla. Donec sollicitudin tincidunt viverra. Nunc condimentum molestie massa a feugiat. Nam mattis bibendum sodales. Nulla at maximus arcu, quis tempus lacus.

Vestibulum pharetra pretium neque eu faucibus. Morbi aliquam urna non lacinia congue. Donec sed odio interdum, imperdiet tellus in, porttitor erat. Mauris erat velit, facilisis ut luctus sit amet, laoreet vitae ligula. Morbi a mi ultrices, feugiat ante in, convallis enim. Etiam sollicitudin leo purus, ut commodo ex placerat et. Proin ut nulla non risus luctus eleifend eu id orci.

Ut aliquam tristique massa. Nullam a ipsum tincidunt, malesuada ipsum non, suscipit lectus. Suspendisse sit amet risus ut lectus efficitur feugiat in ut urna. Suspendisse odio felis, efficitur eu molestie eu, malesuada nec nunc. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Quisque fermentum sit amet odio id convallis. Donec luctus risus ac pretium ultrices. Quisque congue velit sed hendrerit posuere. Integer dictum felis eu tortor mattis scelerisque. Fusce facilisis justo nec velit vehicula gravida sit amet at erat. Suspendisse sit amet nibh metus. Aenean euismod, tortor a venenatis laoreet, sapien arcu semper turpis, non molestie risus ligula nec velit.

Nulla eget ultrices justo, non posuere dui. Praesent ultrices dui eget erat accumsan varius. Ut ut mi arcu. Integer porttitor, neque vitae fermentum dictum, tellus quam tincidunt mauris, eget tristique turpis mauris nec magna. Phasellus ut tortor eros. Ut vehicula non purus in efficitur. Quisque justo elit, varius id luctus et, pulvinar eget ipsum. Sed tristique et odio eu facilisis.

Phasellus sodales eros at erat elementum, a semper ligula facilisis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Morbi at maximus nunc. In porttitor rutrum rhoncus. Ut dignissim viverra erat in aliquet. Suspendisse potenti. Donec lorem sem, vulputate non diam a, facilisis luctus tortor. In pellentesque ut eros id vulputate. Proin rutrum tincidunt libero, vel dictum libero ullamcorper in. Nam nec ultricies tortor, sit amet pellentesque ante. Sed tellus purus, pharetra vitae purus quis, accumsan vestibulum tellus. Vivamus porttitor urna a odio tincidunt tristique. Integer ut metus finibus, ultricies magna sed, congue eros. Duis velit velit, consectetur at faucibus ac, scelerisque nec diam.
</slot>
        </div>
        ${this.footer?z`<div class="modal-footer">
          <span>${this.footer}</span>
        </div>`:""}
      </div>
      <visualscript-overlay .open=${this.open}></visualscript-overlay>
    `}}customElements.define("visualscript-modal",$t);class At extends J{static get styles(){return o`

    :host {
      padding: 25px;
      border-top: 1px solid rgb(180,180,180);
      background: white;
      color: black;
      display:flex;
      align-items: center;
      width: 100%;
      font-size: 70%;
      box-sizing: border-box;
      z-index: 100;
      grid-area: foot;
    }

    :host * {
      box-sizing: border-box;
    }

    @media (prefers-color-scheme: dark) {
      :host {
        background: #060606;
        color: white;
      }

      a {
        color: white;
      }
    }
    `}static get properties(){return{}}constructor(t={}){super()}render(){return z`

      <slot></slot>
    `}}customElements.define("visualscript-footer",At);class St extends J{constructor(t={}){var e;super(),this.open=!1,this.open=null!==(e=t.open)&&void 0!==e&&e}static get styles(){return o`

    div {
      opacity: 0;
      width: 100vw;
      height: 100vh;
      transition: 0.5s;
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 50;
      color: black;
      background: rgb(255,255, 255, 0.7);
    }
    

    div[open] {
      opacity: 1;
      pointer-events: all;
      backdrop-filter: blur(3px);
    }

    @media (prefers-color-scheme: dark) {
      div {
        color: white;
        background: rgb(0,0,0, 0.5);
      }
    }

    `}static get properties(){return{open:{type:Boolean,reflect:!0}}}render(){return z`
      <div ?open=${!!this.open}>
        <slot></slot>
      </div>
    `}}
/**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
var _t;customElements.define("visualscript-overlay",St),null===(_t=window.HTMLSlotElement)||void 0===_t||_t.prototype.assignedElements,
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");
/**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const Ct=yt(class extends xt{constructor(t){var e;if(super(t),t.type!==bt||"class"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var i,s;if(void 0===this.et){this.et=new Set,void 0!==t.strings&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in e)e[t]&&!(null===(i=this.st)||void 0===i?void 0:i.has(t))&&this.et.add(t);return this.render(e)}const r=t.element.classList;this.et.forEach((t=>{t in e||(r.remove(t),this.et.delete(t))}));for(const t in e){const i=!!e[t];i===this.et.has(t)||(null===(s=this.st)||void 0===s?void 0:s.has(t))||(i?(r.add(t),this.et.add(t)):(r.remove(t),this.et.delete(t)))}return O}}),Et={label:{type:String,reflect:!0},persist:{type:Boolean,reflect:!0},value:{type:String,reflect:!0},onChange:{type:Function,reflect:!0}},Lt=t=>{t.persist&&t.label&&localStorage.setItem(t.label,String(t.value))},Pt=t=>{if(t.value)return t.value;if(t.persist&&t.label){const e=localStorage.getItem(t.label);return"null"===e?null:"undefined"===e?void 0:e}};class Ft extends J{constructor(t={}){var e,i,s;super(),this.value=null!==(e=t.value)&&void 0!==e?e:"",this.outline=null!==(i=t.outline)&&void 0!==i&&i,this.disabled=null!==(s=t.disabled)&&void 0!==s&&s,this.label=t.label,this.persist=t.persist;const r=Pt(t);r&&(this.value=r)}static get properties(){return Object.assign(Et,{disabled:{type:Boolean,reflect:!0},outline:{type:Boolean,reflect:!0}})}willUpdate(t){t.has("value")&&Lt(this)}static get styles(){return o`

        :host {
            width: 100%;
            font-size: 15px;

        }
*{
box-sizing: border-box;
}
.form-group {
position: relative;
margin: 15px 0;
}
input.outline {
border: 1px solid  #333333;
border-radius: 5px;
}
label {
position: absolute;
left: 0;
top: 50%;
transform: translateY(-50%);
color: gray;
padding: 0 0.3rem;
margin: 0 0.5rem;
transition: 0.1s ease-out;
transform-origin: left top;
pointer-events: none;
}
input {
outline: none;
border: none;
border-radius: 0px;
padding: 15px 0.6rem 10px 0.6rem;
transition: 0.1s ease-out;
border-bottom: 1px solid  #333333;
background: transparent;
cursor: text;
margin-left: auto;
width: 95%;
margin-right: auto;
}
input::placeholder {
    color: transparent;
}
input:focus{
border-color:  #b949d5;
}
input:focus + label{
color:  #b949d5;
top: 0;
transform: translateY(-50%) scale(0.9);
}
input:not(:placeholder-shown) + label{
top: 0;
transform: translateY(-50%) scale(0.9);
}
input:focus:not(.outline) ~ label,
input:not(:placeholder-shown):not(.outline) ~ label
{
padding-left: 0px;
}
input:disabled,  input:disabled ~ .label {
opacity: 0.5;
}

@media (prefers-color-scheme: dark) {
    label {
      color: rgb(120,120,120);
    }
  }
`}render(){return z`
            <div class="form-group">
                <input
                class=${Ct({outline:this.outline})}
                type="${this.type}"
                placeholder="${this.label}"
                .value=${"null"!=this.value&&"undefined"!=this.value?this.value:""}
                ?disabled="${this.disabled}"

                @change=${t=>{this.value=t.target.value}}
                />
                <label>${this.label}</label>
            </div>
        `}}customElements.define("visualscript-input",Ft);class zt extends J{constructor(t={}){super(),this.getModal=()=>this.shadowRoot.querySelector("visualscript-modal"),t.items&&(this.items=t.items),window.onkeydown=t=>{switch(t.code){case"Enter":case"Escape":this.modal.open=!1;break;case"ArrowUp":console.log("Up!");break;case"ArrowDown":console.log("Down!")}}}static get styles(){return o`

    :host {
      display: flex;
      align-items: center;
      padding: 10px;
    }

    :host * {
      
      box-sizing: border-box;
      
    }

    button {
      padding: 5px;
      border-radius: 5px;
    }

    `}static get properties(){return{placeholder:{type:String},items:{type:Object},value:{type:String,reflect:!0}}}render(){const t=new RegExp(this.value,"i");return z`
        <visualscript-button @click=${()=>{this.modal=this.getModal(),this.modal.toggle()}}>Search</visualscript-button>
        <visualscript-modal 
          .header=${z`<visualscript-input label="Search" @input=${t=>{this.value=t.composedPath()[0].value}}></visualscript-input>`}
          .footer=${z`<div id=commands>Enter to select. Up and Down Arrows to navigate. Esc to close.</div>`}
        >
        <div>${this.items.map((e=>{var i;let s=!1;if(this.value?(e.tags&&e.tags.forEach((e=>{e.match(t)&&(s=!0)})),e.name.match(t)&&(s=!0)):s=!0,s)return z`<div><h3>${e.name}</h3><small>${null!==(i=e.tags)&&void 0!==i?i:"No Tags"}</small></div>`}))}</div>
        </visualscript-modal>
      `}}customElements.define("visualscript-search",zt);class Ot extends J{constructor(t={}){var e;super(),this.persist=!1,this.optionChecked="",this.optionHoveredIndex=-1,this.options=[],this.onChange=()=>{},this.add=t=>{this.options=[...this.options,t]},this.openSelectCustom=()=>{if(this.elements.elSelectCustom.classList.add("isActive"),this.elements.elSelectCustom.setAttribute("aria-hidden","false"),this.optionChecked){const t=this.elements.customOptsList.findIndex((t=>t.getAttribute("data-value")===this.optionChecked));this.updateCustomSelectHovered(t)}document.addEventListener("keydown",this.supportKeyboardNavigation)},this.closeSelectCustom=()=>{this.elements.elSelectCustom.classList.remove("isActive"),this.elements.elSelectCustom.setAttribute("aria-hidden","true"),this.updateCustomSelectHovered(-1),document.removeEventListener("keydown",this.supportKeyboardNavigation)},this.updateCustomSelectHovered=t=>{const e=this.elements.elSelectCustomOpts.children[this.optionHoveredIndex],i=this.elements.elSelectCustomOpts.children[t];e&&e.classList.remove("isHover"),i&&i.classList.add("isHover"),this.optionHoveredIndex=t},this.updateCustomSelectChecked=(t,e)=>{var i;if(this.elements){e||(e=null===(i=this.elements.elSelectCustomOpts.querySelectorAll(`[data-value="${t}"]`)[0])||void 0===i?void 0:i.textContent);const s=this.optionChecked,r=this.elements.elSelectCustomOpts.querySelector(`[data-value="${s}"`),o=this.elements.elSelectCustomOpts.querySelector(`[data-value="${t}"`);r&&r.classList.remove("isActive"),o&&o.classList.add("isActive");this.elements.elSelectCustom.children[0].children[0].textContent=e,this.optionChecked=t}},this.watchClickOutside=t=>{!this.contains(t.target)&&this.closeSelectCustom()},this.supportKeyboardNavigation=t=>{if(40===t.keyCode&&this.optionHoveredIndex<this.optionsCount-1&&(this.optionHoveredIndex,t.preventDefault(),this.updateCustomSelectHovered(this.optionHoveredIndex+1)),38===t.keyCode&&this.optionHoveredIndex>0&&(t.preventDefault(),this.updateCustomSelectHovered(this.optionHoveredIndex-1)),13===t.keyCode||32===t.keyCode){t.preventDefault();const e=this.elements.elSelectCustomOpts.children[this.optionHoveredIndex],i=e&&e.getAttribute("data-value");i&&(this.elements.elSelectNative.value=i,this.updateCustomSelectChecked(i,e.textContent)),this.closeSelectCustom()}27===t.keyCode&&this.closeSelectCustom()},this.options=null!==(e=t.options)&&void 0!==e?e:[],t.onChange&&(this.onChange=t.onChange),t.label&&(this.label=t.label),t.persist&&(this.persist=t.persist);const i=Pt(t);i&&this.options.includes(i)&&(this.value=i)}static get styles(){return o`

    #container { 
      position: relative;
    }

    :host * {
      box-sizing: border-box;
    }

    .selectNative, .selectCustom {
      position: relative;
      width: 100%;
      font-size: 15px;
    }

    
    .selectCustom {
      position: absolute;
      top: 0;
      left: 0;
      display: none;
      background: white;
    }
    
    .selectNative:focus,
    .selectCustom.isActive .selectCustom-trigger {
      outline: none;
      box-shadow: white 0 0 5px 2px;
    }
    

    .select {
      position: relative;
    }
    
    .selectLabel {
      display: block;
      font-weight: bold;
      margin-bottom: 0.4rem;
    }
    
    .selectNative, .selectCustom-trigger {
      border: 1px solid #6f6f6f;
      border-radius: 0.4rem;
    }
    
    .selectNative {
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml;utf8,<svg fill='black' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
      background-repeat: no-repeat;
      background-position-x: 100%;
      background-position-y: 0.45rem;
      padding: 10px 10px;
    }
    
    .selectCustom-trigger  > div {
      overflow: scroll;
      white-space: nowrap;
    }

    .selectCustom-trigger {
      display: flex;
      align-items: center;
      position: relative;
      padding: 0px 10px;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }
    
    .selectCustom-trigger::after {
      content: "";
      position: absolute;
      top: 0;
      line-height: 3.2rem;
      right: 0.5rem;
    }
    
    .selectCustom-trigger:hover {
      border-color: #028ee6;
    }
    
    .selectCustom-options {
      position: absolute;
      top: calc(2.8rem + 0.8rem);
      left: 0;
      width: 100%;
      border: 1px solid #6f6f6f;
      border-radius: 0.4rem;
      background-color: whitesmoke;
      box-shadow: 0 0 4px #e9e1f8;
      z-index: 1;
      padding: 0.8rem 0;
      display: none;
    }
    
    .selectCustom.isActive .selectCustom-options {
      display: block;
    }
    
    .selectCustom-option {
      position: relative;
      padding: 0.8rem;
      padding-left: 2.5rem;
      font-size: 80%;
    }

    .selectCustom-option.isHover,
    .selectCustom-option:hover {
      background-color: #1ea7fd; // contrast AA
      color: white;
      cursor: default;
    }
    
    .selectCustom-option:not(:last-of-type)::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      border-bottom: 1px solid #d3d3d3;
    }
    
    .selectCustom-option.isActive::before {
      content: "";
      position: absolute;
      left: 0.8rem;
    }


    /* This makes the Custom Select work... 
      Issues: Doesn't work inside of another component (e.g. Control), it clicks on that instead
    @media (hover: hover) {
      
      .selectCustom {
        display: block;
      }
    
      .selectNative:focus + .selectCustom {
        display: none;
      }
    }
    */

    @media (prefers-color-scheme: dark) {
      .selectCustom {
        background: rgb(59, 59, 59);
      }

      .selectNative {
        background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
      }

      .selectCustom-options {
        background: rgb(45, 45, 45);
      }
    }
    `}static get properties(){return Object.assign({options:{type:Array,reflect:!0}},Et)}willUpdate(t){var e,i,s;if(t.has("value")&&Lt(this),t.has("options")){const t=null!==(i=null===(e=this.options[0])||void 0===e?void 0:e.value)&&void 0!==i?i:this.options[0];this.value=null!==(s=this.value)&&void 0!==s?s:t}}updated(t){const e=this.shadowRoot.querySelectorAll(".js-selectNative")[0],i=this.shadowRoot.querySelectorAll(".js-selectCustom")[0],s=i.children[1],r=Array.from(s.children);this.optionsCount=r.length,this.elements={elSelectNative:e,elSelectCustom:i,elSelectCustomOpts:s,customOptsList:r},this.value&&this.updateCustomSelectChecked(this.value)}render(){return z`
      <div id=container>
      <select class="selectNative js-selectNative" aria-labelledby="${this.label}Label" 
      @change=${t=>{const e=t.target.value,i=this.elements.elSelectCustomOpts.querySelectorAll(`[data-value="${e}"]`)[0];this.updateCustomSelectChecked(e,i.textContent),this.value=t.target.value,this.onChange(t)}}>
      ${0===this.options.length?z`<slot></slot>`:this.options.map(((t,e)=>("object"!=typeof t&&(t={value:t,text:t}),z`<option 
          value=${t.value} 
          ?selected=${t.value===this.value} 
          >
            ${t.text}
          </option>`)))}
    </select>

    <div class="selectCustom js-selectCustom" aria-hidden="true"}>
      <div class="selectCustom-trigger" @click=${t=>{!t.target.parentNode.classList.contains("isActive")?this.openSelectCustom():this.closeSelectCustom()}}>
        <div></div>
      </div>
        <div class="selectCustom-options">
        ${this.options.map(((t,e)=>("object"!=typeof t&&(t={value:t,text:t}),z` <div 
          class="selectCustom-option" 
          data-value=${t.value}
          @mouseenter=${t=>{this.updateCustomSelectHovered(e)}}
          @click=${t=>{const e=t.target.getAttribute("data-value");this.elements.elSelectNative.value=e,this.updateCustomSelectChecked(e,t.target.textContent),this.closeSelectCustom()}}
          >
            ${t.text}
          </div>`)))}
          </div>
        </div>
      </div>
    </div>
    `}}customElements.define("visualscript-select",Ot);class jt extends J{constructor(t={}){super(),this.onChange=()=>{},t.accept&&(this.accept=t.accept),t.onChange&&(this.onChange=t.onChange),t.webkitdirectory&&(this.webkitdirectory=t.webkitdirectory),t.directory&&(this.directory=t.directory),t.multiple&&(this.multiple=t.multiple)}static get styles(){return o`

    :host {
      display: flex;
      justify-content: center;
      overflow: hidden;
    }
    
    input[type=file] {
      display: none;
    }

    :host * {
      box-sizing: border-box;
    }
    
    button {
      flex: auto;
      padding: 8px 12px;
      border-top-left-radius: 5px;
      border-bottom-left-radius: 5px;
      border: none;  
      color: #ffffff;
      background-color: #1ea7fd;
      width: 100%;
      cursor: pointer;    
      /* white-space: nowrap; */
      font-weight: bold;
    }

    .hide {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      border: 0;
    }

    input[type=text] {
      flex-grow: 1;
      padding: 10px;
      border-top-right-radius: 5px;
      border-bottom-right-radius: 5px;
      border: none;
      overflow: hidden;
    }

    input[type=text] {
      flex-grow: 1;
      padding: 8px 8px;
      border-top-right-radius: 5px;
      border-bottom-right-radius: 5px;
      border: none;
      color: black;
      background-color: white;
    }

    @media (prefers-color-scheme: dark) {
      input[type=text] {
        color: white;
        background-color: rgb(59, 59, 59);
      }
    }
    
    `}static get properties(){return{accept:{type:String,reflect:!0},onChange:{type:Function,reflect:!0},webkitdirectory:{type:Boolean,reflect:!0},directory:{type:Boolean,reflect:!0},multiple:{type:Boolean,reflect:!0}}}render(){const t=document.createElement("input");return t.type="file",t.id="fileupload",t.accept=this.accept,t.webkitdirectory=this.webkitdirectory,t.directory=this.directory,t.multiple=this.multiple,t.onchange=t=>{const e=t.target.files.length,i=t.target.files[0],s=this.shadowRoot.querySelector("input[type=text]");var r=1===e?i.name:`${e} files`;s.value=r,s.placeholder=r,s.focus(),this.onChange(t)},z`
      <label for="fileupload" id="buttonlabel">
        <button aria-controls="filename" tabindex="0" @click=${()=>{t&&t.click()}}>Choose File</button>
      </label>
      ${t}
      <label for="filename" class="hide">
        uploaded file
      </label>
      <input type="text" id="filename" autocomplete="off" readonly placeholder="no file chosen">  
    `}}customElements.define("visualscript-file",jt);class Mt extends J{constructor(t={}){super(),this.persist=!1,this.onChange=()=>{},t.onChange&&(this.onChange=t.onChange),t.label&&(this.label=t.label),t.persist&&(this.persist=t.persist);const e=Pt(t);e&&(this.value=e)}static get styles(){return o`

    :host * {
      box-sizing: border-box;
    }

    [role="switch"] {  
      position: relative;
      border-radius: 0.5rem;
      padding: 1em 2em;
      cursor: pointer;
      background-color: white;
      border: none;
      border-radius: 14px;
      -webkit-transition: .4s;
      transition: .4s;
    }

    [role="switch"] * {
      pointer-events: none;
    }


    [role="switch"][aria-pressed="true"] {
      background-color: #1ea7fd;
    }

    [role="switch"][aria-pressed="true"] > .slider{
      -webkit-transform: translateY(-50%) translateX(100%);
      -ms-transform: translateY(-50%) translateX(100%);
      transform: translateY(-50%) translateX(100%);
    }

    /* Remove the default outline and 
    add the outset shadow */  
    [aria-pressed]:focus {
      outline: none;
      box-shadow: white 0 0 5px 2px;
    }

    /* The slider */
    .slider {
      padding: 3px;
      position: absolute;
      cursor: pointer;
      top: 50%;
      left: 0;
      -webkit-transform: translateY(-50%);
      -ms-transform: translateY(-50%);
      transform: translateY(-50%);
      -webkit-transition: .4s;
      transition: .4s;
      height: 100%;
      aspect-ratio: 1/1;
    }
    .slider > * {
      background-color: #ccc;
      width: 100%;
      height: 100%;
    }

    /* Rounded sliders */
    .slider.round > * {
      border-radius: 34px;
    }

    `}static get properties(){return Et}willUpdate(t){t.has("value")&&Lt(this)}render(){return z`
      <button class="switch" role="switch" aria-pressed="${String(this.value)}" aria-labelledby=${this.label} @click=${t=>{let e="true"===t.target.getAttribute("aria-pressed");this.value=!e,t.target.setAttribute("aria-pressed",String(this.value)),this.onChange(t)}}>
        <div class="slider round"><div></div></div>
    </button>
    `}}customElements.define("visualscript-switch",Mt);class Tt extends J{constructor(t={}){super(),this.persist=!1,this.value=0,this.min=0,this.max=100,this.onChange=()=>{},this.onInput=()=>{},t.onChange&&(this.onChange=t.onChange),t.label&&(this.label=t.label),t.persist&&(this.persist=t.persist),t.min&&(this.min=t.min),t.max&&(this.max=t.max);const e=Pt(t);e&&(this.value=e)}static get styles(){return o`

    :host {
      width: 100%;
      height: 100%;
    }

    :host * {
      box-sizing: border-box;
    }

    .wrapper {
      position: relative;
      width: 100%;
      height: 100%;
    }

    input[type="range"] {
      -webkit-appearance: none;
      position: relative;
      overflow: hidden;
      height: 30%;
      width: 100%;
      cursor: pointer;
      border: none;
      margin: 0;
  }
  
  output {
      position: absolute; 
      user-select: none; 
      pointer-events: none; 
      z-index: 1;
      top: 50%;
      left: 10px;
      transform: translate(0%, calc(-50% - 0.12rem));
      font-size: 80%;
  }
  
  input[type="range"]::-webkit-slider-runnable-track {
  }
  
  input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 0; /* 1 */
      height: 20px;
      box-shadow: -100vw 0 0 100vw #1ea7fd;
      opacity: 0.9;
      transition: opacity 0.5s;
  }
  
  input[type="range"]:hover::-webkit-slider-thumb{
      opacity: 1;
  }
  
  input[type="range"]::-moz-range-track {

  }
  
    .visually-hidden { 
        position: absolute !important;
        height: 1px; 
        width: 1px;
        overflow: hidden;
        clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
        clip: rect(1px, 1px, 1px, 1px);
        white-space: nowrap; /* added line */
    }

    `}static get properties(){return Object.assign(Et,{min:{type:Number,reflect:!0},max:{type:Number,reflect:!0}})}willUpdate(t){t.has("value")&&Lt(this)}render(){return z`
      <div class="wrapper">
        <input type="range" min="${this.min}" max="${this.max}" id="${this.label}" @change=${t=>{this.value=t.target.value,this.onChange(t)}} @input=${t=>{this.onInput(t)}}/>
        <output for="${this.label}">${this.value}</output>
        <label class="visually-hidden" for="${this.label}">${this.label}</label>
      </div>
    `}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function Nt(t,e,i,s){return new(i||(i=Promise))((function(r,o){function n(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}l((s=s.apply(t,e||[])).next())}))}customElements.define("visualscript-range",Tt);const Rt=["Hot","Cold","YlGnBu","YlOrRd","RdBu","Portland","Picnic","Jet","Greys","Greens","Electric","Earth","Bluered","Blackbody"];class Ut extends J{constructor(t={}){var e;super(),this.colorscale="Electric",this.div=document.createElement("div"),this.data=[],this.plotData=[],this.layout={},this.windowSize=300,this.binWidth=256,this.colorscales=Rt,this.config={},this.getTraces=()=>this.data.map((t=>Object.assign({type:"scatter",mode:"lines"},t))),this.getConfig=()=>Object.assign({displaylogo:!1,responsive:!0},this.config),this.getLayout=()=>Object.assign({},this.layout),this.data=null!==(e=t.data)&&void 0!==e?e:[],t.layout&&(this.layout=t.layout),window.Plotly&&(t.Plotly=window.Plotly),t.colorscale&&(this.colorscale=t.colorscale),t.onClick&&(this.onClick=t.onClick),t.onLegendClick&&(this.onLegendClick=t.onLegendClick),t.config&&(this.config=t.config),t.Plotly?(this.Plotly=t.Plotly,this.Plotly.newPlot(this.div,this.getTraces(),this.getLayout(),this.getConfig())):console.warn("<visualscript-timeseries->: Plotly instance not provided...")}static get styles(){return o`

      :host {
        overflow: hidden;
      }
      
      `}createRenderRoot(){return this}static get properties(){return{max:{type:Number,reflect:!0},data:{type:Array,reflect:!0},layout:{type:Object,reflect:!0},config:{type:Object,reflect:!0},colorscale:{type:Object,reflect:!0},backgroundColor:{type:String,reflect:!0},onLegendClick:{type:Function,reflect:!0},onClick:{type:Function,reflect:!0}}}transpose(t){return Object.keys(t[0]).map((function(e){return t.map((function(t){return t[e]}))}))}willUpdate(t){t.has("data")&&this.Plotly.newPlot(this.div,this.getTraces(),this.getLayout(),this.getConfig()),t.has("onClick")&&this.div.on("plotly_click",this.onClick),t.has("onLegendClick")&&this.div.on("plotly_legendclick",this.onLegendClick)}render(){return this.div}}Ut.colorscales=Rt,customElements.define("visualscript-timeseries",Ut);const Ht=["Hot","Cold","YlGnBu","YlOrRd","RdBu","Portland","Picnic","Jet","Greys","Greens","Electric","Earth","Bluered","Blackbody"];class Yt extends J{constructor(t={}){var e;super(),this.colorscale="Electric",this.div=document.createElement("div"),this.data=[],this.plotData=[],this.layout={},this.windowSize=300,this.binWidth=256,this.config={},this.colorscales=Ht,this.getConfig=()=>Object.assign({displaylogo:!1,responsive:!0},this.config),this.data=null!==(e=t.data)&&void 0!==e?e:[[]],t.colorscale&&(this.colorscale=t.colorscale),t.config&&(this.config=t.config),window.Plotly&&(t.Plotly=window.Plotly),this.plotData=[{x:[1,2],z:this.transpose(this.data),showscale:!0,colorscale:this.colorscale,type:"heatmap"}],this.layout={},t.Plotly?(this.Plotly=t.Plotly,this.Plotly.newPlot(this.div,this.plotData,this.layout,this.getConfig())):console.warn("<-spectrogram>: Plotly instance not provided...")}static get styles(){return o`

      `}createRenderRoot(){return this}static get properties(){return{max:{type:Number,reflect:!0},data:{type:Array,reflect:!0},config:{type:Object,reflect:!0},colorscale:{type:Object,reflect:!0},backgroundColor:{type:String,reflect:!0}}}transpose(t){return Object.keys(t[0]).map((function(e){return t.map((function(t){return t[e]}))}))}willUpdate(t){t.has("colorscale")&&(Array.isArray(this.colorscale)||this.colorscales.includes(this.colorscale)||(this.colorscale="Electric"),this.Plotly.restyle(this.div,"colorscale",this.colorscale)),t.has("data")&&(this.plotData[0].z=this.transpose(this.data),this.Plotly.newPlot(this.div,this.plotData,this.layout,this.getConfig()))}render(){return this.div}}Yt.colorscales=Ht,customElements.define("visualscript-spectrogram",Yt);class Bt extends J{constructor(t={target:{},header:"Object"}){var e,i,s;super(),this.history=[],this.getMode=(t,e)=>e?"plot":"view",this.set=(t={},e=!1)=>Nt(this,void 0,void 0,(function*(){this.preprocess instanceof Function?this.target=yield this.preprocess(t):this.target=t,this.keys=Object.keys(this.target),this.mode=this.getMode(this.target,e)})),this.checkToPlot=(t,e)=>0!==this.plot.length&&this.plot.reduce(((i,s)=>i+s(t,e)),0)===this.plot.length,this.getActions=(t,e)=>{let i;if("object"==typeof e[t]){const s=this.getMode(e[t],this.checkToPlot(t,e));i=z`<visualscript-button primary=true size="small" @click="${()=>Nt(this,void 0,void 0,(function*(){this.history.push({parent:e,key:this.header}),yield this.set(e[t],this.checkToPlot(t,e)),this.header=t}))}">${s[0].toUpperCase()+s.slice(1)}</visualscript-button>`}return z`
      <div class="actions">
            ${i}
      </div>
      `},this.getElement=(t,e)=>{let i;"string"==typeof e[t]&&e[t].includes("data:image")?(i=document.createElement("img"),i.src=e[t],i.style.height="100%"):(i=new Ft,i.value=e[t],i.oninput=()=>{e[t]=i.value});const s="object"==typeof e[t];return z`
        <div class="attribute separate">
        <div class="info">
          <span class="name">${t}</span><br>
          <span class="value">${s?Object.keys(e[t]).length?e[t].constructor.name:z`Empty ${e[t].constructor.name}`:""}</span>
        </div>
          ${s?this.getActions(t,e):i}
        </div>`},this.set(t.target),this.header=null!==(e=t.header)&&void 0!==e?e:"Object",this.mode=null!==(i=t.mode)&&void 0!==i?i:"view",this.plot=null!==(s=t.plot)&&void 0!==s?s:[],this.onPlot=t.onPlot,t.preprocess&&(this.preprocess=t.preprocess),this.timeseries=new Ut({data:[]})}static get styles(){return o`

    :host * {
      box-sizing: border-box;
    }

    :host > * {
      background: white;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 1px 5px 0 rgb(0 0 0 / 20%);
      height: 100%;
      width: 100%;
    }

    img {
      max-height: 100px;
    }

    .header {
      padding: 10px 20px;
      border-top-left-radius: 3px;
      border-top-right-radius: 3px;
      font-size: 70%;
      border-bottom: 1px solid #e3e3e3;
    }

    .header span {
      font-weight: 800;
      font-size: 120%;
    }

    .container {
      width: 100%;
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      position: relative;
      overflow: scroll;
      height: 100%;
    }

    .separate {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .attribute {
      width: 100%;
      font-size: 90%;
      padding: 15px;
      flex-grow: 1;
      flex-wrap: wrap;
    }

    .info {
      display: flex;
      align-items: center;
    }

    .name {
      font-weight: 800;
      padding-right: 10px;
    }

    .value {
      font-size: 80%;
    }

    @media (prefers-color-scheme: dark) {
      :host > * {
        background-color: rgb(60, 60, 60);
        box-shadow: 0 1px 5px 0 rgb(255 255 255 / 20%);
      }

      .header {
        border-bottom: 1px solid gray;
      }
    }

    `}static get properties(){return{keys:{type:Object,reflect:!0},plot:{type:Object,reflect:!0},header:{type:String,reflect:!0},mode:{type:String,reflect:!0},onPlot:{type:Function,reflect:!0},preprocess:{type:Function,reflect:!0}}}render(){var t;return"plot"===this.mode?(this.onPlot instanceof Function&&this.onPlot(this),this.insertAdjacentElement("afterend",this.timeseries)):this.timeseries.remove(),z`
      <div>
        <div class="header separate">
          <span>${this.header}</span>
          ${this.history.length>0?z`<visualscript-button size="extra-small" @click="${()=>{const t=this.history.pop();this.set(t.parent),this.header=t.key}}">Go Back</visualscript-button>`:""}
        </div>
        <div class="container">
              ${"view"===this.mode?null===(t=this.keys)||void 0===t?void 0:t.map((t=>this.getElement(t,this.target))):""}
        </div>
      </div>
    `}}customElements.define("visualscript-object-editor",Bt);var It="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dt={exports:{}};!function(t){var e=function(t){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},r={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof o?new o(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++i}),t.__id},clone:function t(e,i){var s,o;switch(i=i||{},r.util.type(e)){case"Object":if(o=r.util.objId(e),i[o])return i[o];for(var n in s={},i[o]=s,e)e.hasOwnProperty(n)&&(s[n]=t(e[n],i));return s;case"Array":return o=r.util.objId(e),i[o]?i[o]:(s=[],i[o]=s,e.forEach((function(e,r){s[r]=t(e,i)})),s);default:return e}},getLanguage:function(t){for(;t;){var i=e.exec(t.className);if(i)return i[1].toLowerCase();t=t.parentElement}return"none"},setLanguage:function(t,i){t.className=t.className.replace(RegExp(e,"gi"),""),t.classList.add("language-"+i)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(s){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(s.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var i in e)if(e[i].src==t)return e[i]}return null}},isActive:function(t,e,i){for(var s="no-"+e;t;){var r=t.classList;if(r.contains(e))return!0;if(r.contains(s))return!1;t=t.parentElement}return!!i}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(t,e){var i=r.util.clone(r.languages[t]);for(var s in e)i[s]=e[s];return i},insertBefore:function(t,e,i,s){var o=(s=s||r.languages)[t],n={};for(var a in o)if(o.hasOwnProperty(a)){if(a==e)for(var l in i)i.hasOwnProperty(l)&&(n[l]=i[l]);i.hasOwnProperty(a)||(n[a]=o[a])}var c=s[t];return s[t]=n,r.languages.DFS(r.languages,(function(e,i){i===c&&e!=t&&(this[e]=n)})),n},DFS:function t(e,i,s,o){o=o||{};var n=r.util.objId;for(var a in e)if(e.hasOwnProperty(a)){i.call(e,a,e[a],s||a);var l=e[a],c=r.util.type(l);"Object"!==c||o[n(l)]?"Array"!==c||o[n(l)]||(o[n(l)]=!0,t(l,i,a,o)):(o[n(l)]=!0,t(l,i,null,o))}}},plugins:{},highlightAll:function(t,e){r.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,i){var s={callback:i,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",s),s.elements=Array.prototype.slice.apply(s.container.querySelectorAll(s.selector)),r.hooks.run("before-all-elements-highlight",s);for(var o,n=0;o=s.elements[n++];)r.highlightElement(o,!0===e,s.callback)},highlightElement:function(e,i,s){var o=r.util.getLanguage(e),n=r.languages[o];r.util.setLanguage(e,o);var a=e.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&r.util.setLanguage(a,o);var l={element:e,language:o,grammar:n,code:e.textContent};function c(t){l.highlightedCode=t,r.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,r.hooks.run("after-highlight",l),r.hooks.run("complete",l),s&&s.call(l.element)}if(r.hooks.run("before-sanity-check",l),(a=l.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!l.code)return r.hooks.run("complete",l),void(s&&s.call(l.element));if(r.hooks.run("before-highlight",l),l.grammar)if(i&&t.Worker){var h=new Worker(r.filename);h.onmessage=function(t){c(t.data)},h.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(r.highlight(l.code,l.grammar,l.language));else c(r.util.encode(l.code))},highlight:function(t,e,i){var s={code:t,grammar:e,language:i};if(r.hooks.run("before-tokenize",s),!s.grammar)throw new Error('The language "'+s.language+'" has no grammar.');return s.tokens=r.tokenize(s.code,s.grammar),r.hooks.run("after-tokenize",s),o.stringify(r.util.encode(s.tokens),s.language)},tokenize:function(t,e){var i=e.rest;if(i){for(var s in i)e[s]=i[s];delete e.rest}var r=new l;return c(r,r.head,t),a(t,r,e,r.head,0),function(t){var e=[],i=t.head.next;for(;i!==t.tail;)e.push(i.value),i=i.next;return e}(r)},hooks:{all:{},add:function(t,e){var i=r.hooks.all;i[t]=i[t]||[],i[t].push(e)},run:function(t,e){var i=r.hooks.all[t];if(i&&i.length)for(var s,o=0;s=i[o++];)s(e)}},Token:o};function o(t,e,i,s){this.type=t,this.content=e,this.alias=i,this.length=0|(s||"").length}function n(t,e,i,s){t.lastIndex=e;var r=t.exec(i);if(r&&s&&r[1]){var o=r[1].length;r.index+=o,r[0]=r[0].slice(o)}return r}function a(t,e,i,s,l,d){for(var u in i)if(i.hasOwnProperty(u)&&i[u]){var p=i[u];p=Array.isArray(p)?p:[p];for(var g=0;g<p.length;++g){if(d&&d.cause==u+","+g)return;var f=p[g],m=f.inside,v=!!f.lookbehind,b=!!f.greedy,y=f.alias;if(b&&!f.pattern.global){var x=f.pattern.toString().match(/[imsuy]*$/)[0];f.pattern=RegExp(f.pattern.source,x+"g")}for(var w=f.pattern||f,k=s.next,$=l;k!==e.tail&&!(d&&$>=d.reach);$+=k.value.length,k=k.next){var A=k.value;if(e.length>t.length)return;if(!(A instanceof o)){var S,_=1;if(b){if(!(S=n(w,$,t,v))||S.index>=t.length)break;var C=S.index,E=S.index+S[0].length,L=$;for(L+=k.value.length;C>=L;)L+=(k=k.next).value.length;if($=L-=k.value.length,k.value instanceof o)continue;for(var P=k;P!==e.tail&&(L<E||"string"==typeof P.value);P=P.next)_++,L+=P.value.length;_--,A=t.slice($,L),S.index-=$}else if(!(S=n(w,0,A,v)))continue;C=S.index;var F=S[0],z=A.slice(0,C),O=A.slice(C+F.length),j=$+A.length;d&&j>d.reach&&(d.reach=j);var M=k.prev;if(z&&(M=c(e,M,z),$+=z.length),h(e,M,_),k=c(e,M,new o(u,m?r.tokenize(F,m):F,y,F)),O&&c(e,k,O),_>1){var T={cause:u+","+g,reach:j};a(t,e,i,k.prev,$,T),d&&T.reach>d.reach&&(d.reach=T.reach)}}}}}}function l(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function c(t,e,i){var s=e.next,r={value:i,prev:e,next:s};return e.next=r,s.prev=r,t.length++,r}function h(t,e,i){for(var s=e.next,r=0;r<i&&s!==t.tail;r++)s=s.next;e.next=s,s.prev=e,t.length-=r}if(t.Prism=r,o.stringify=function t(e,i){if("string"==typeof e)return e;if(Array.isArray(e)){var s="";return e.forEach((function(e){s+=t(e,i)})),s}var o={type:e.type,content:t(e.content,i),tag:"span",classes:["token",e.type],attributes:{},language:i},n=e.alias;n&&(Array.isArray(n)?Array.prototype.push.apply(o.classes,n):o.classes.push(n)),r.hooks.run("wrap",o);var a="";for(var l in o.attributes)a+=" "+l+'="'+(o.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+a+">"+o.content+"</"+o.tag+">"},!t.document)return t.addEventListener?(r.disableWorkerMessageHandler||t.addEventListener("message",(function(e){var i=JSON.parse(e.data),s=i.language,o=i.code,n=i.immediateClose;t.postMessage(r.highlight(o,r.languages[s],s)),n&&t.close()}),!1),r):r;var d=r.util.currentScript();function u(){r.manual||r.highlightAll()}if(d&&(r.filename=d.src,d.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var p=document.readyState;"loading"===p||"interactive"===p&&d&&d.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});
/**
     * Prism: Lightweight, robust, elegant syntax highlighting
     *
     * @license MIT <https://opensource.org/licenses/MIT>
     * @author Lea Verou <https://lea.verou.me>
     * @namespace
     * @public
     */t.exports&&(t.exports=e),void 0!==It&&(It.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(t,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};r["language-"+i]={pattern:/[\s\S]+/,inside:e.languages[i]};var o={};o[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:r},e.languages.insertBefore("markup","cdata",o)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(t,i){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:e.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var i=t.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(void 0!==e&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var t={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},i="data-src-status",s="loading",r="loaded",o='pre[data-src]:not([data-src-status="loaded"]):not([data-src-status="loading"])';e.hooks.add("before-highlightall",(function(t){t.selector+=", "+o})),e.hooks.add("before-sanity-check",(function(n){var a=n.element;if(a.matches(o)){n.code="",a.setAttribute(i,s);var l=a.appendChild(document.createElement("CODE"));l.textContent="Loading";var c=a.getAttribute("data-src"),h=n.language;if("none"===h){var d=(/\.(\w+)$/.exec(c)||[,"none"])[1];h=t[d]||d}e.util.setLanguage(l,h),e.util.setLanguage(a,h);var u=e.plugins.autoloader;u&&u.loadLanguages(h),function(t,e,i){var s=new XMLHttpRequest;s.open("GET",t,!0),s.onreadystatechange=function(){4==s.readyState&&(s.status<400&&s.responseText?e(s.responseText):s.status>=400?i(" Error "+s.status+" while fetching file: "+s.statusText):i(" Error: File does not exist or is empty"))},s.send(null)}(c,(function(t){a.setAttribute(i,r);var s=function(t){var e=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(t||"");if(e){var i=Number(e[1]),s=e[2],r=e[3];return s?r?[i,Number(r)]:[i,void 0]:[i,i]}}(a.getAttribute("data-range"));if(s){var o=t.split(/\r\n?|\n/g),n=s[0],c=null==s[1]?o.length:s[1];n<0&&(n+=o.length),n=Math.max(0,Math.min(n-1,o.length)),c<0&&(c+=o.length),c=Math.max(0,Math.min(c,o.length)),t=o.slice(n,c).join("\n"),a.hasAttribute("data-start")||a.setAttribute("data-start",String(n+1))}l.textContent=t,e.highlightElement(l)}),(function(t){a.setAttribute(i,"failed"),l.textContent=t}))}})),e.plugins.fileHighlight={highlight:function(t){for(var i,s=(t||document).querySelectorAll(o),r=0;i=s[r++];)e.highlightElement(i)}};var n=!1;e.fileHighlight=function(){n||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),n=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}}()}(Dt);var qt=Dt.exports;class Xt extends J{constructor(t={instance:{},header:"Object"}){var e,i,s;super(),this.history=[],this.getControls=()=>z`
      <div class="actions">
            ${["Save","Reset","Close"].map(((t,e)=>z`<visualscript-button  size="small" @click="${()=>{console.log("Clicked",t,e)}}">${t}</visualscript-button>`))}
      </div>
      `,this.text=t=>{const e=this.shadowRoot.getElementById("highlight");if(e){const i=e.querySelector("code");let s=t.replace(new RegExp("&","g"),"&amp").replace(new RegExp("<","g"),"&lt;");i.innerHTML=s,qt.highlightElement(i)}},this.scroll=t=>{const e=this.shadowRoot.getElementById("highlight");e&&(e.scrollTop=t.scrollTop,e.scrollTop<t.scrollTop&&(t.scrollTop=e.scrollTop),e.scrollLeft=t.scrollLeft)},this.instance=null!==(e=t.instance)&&void 0!==e?e:{},this.header=null!==(i=t.header)&&void 0!==i?i:"Object",this.mode=null!==(s=t.mode)&&void 0!==s?s:"view"}static get styles(){return o`

    
    :host {
      
      width: 100%; 
      height: 100%; 
      z-index: 100000; 
      overflow: scroll;
    }

    :host * {
      box-sizing: border-box;
      
    }

    :host > * {
      background: white;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 1px 5px 0 rgb(0 0 0 / 20%);
    }

    h3 {
      margin: 0;
    }

    #controls {
      display: flex; 
      align-items: center; 
      justify-content: space-between; 
      padding: 10px 25px;
      z-index: 2;
    }

  button {
      margin: 0px;
      border-radius: 0px;
      border: 1px solid rgb(35,35,35);
      padding: 0px 15px;
      font-size: 60%;
  }
  
  textarea {
      border: none;
  }
  
  #editor {
      // color: transparent;
      background: transparent;
      opacity: 0.5;
      caret-color: black;
      z-index: 1;
  }
  
  
  #highlight {
      // background-color: rgba(0,0,0,0.8) !important; 
      z-index: -1 !important;
      white-space: pre !important;
      position:absolute !important;
      top: 0 !important;
      left: 0 !important;
  }
  
  #editor, #highlight {
    margin: 0px !important;
    width: 100% !important;
    height: 100% !important;
    overflow: auto !important;
    white-space: nowrap !important;
    padding: 25px !important;
    resize: none !important;
    -moz-tab-size : 4 !important;
      -o-tab-size : 4 !important;
         tab-size : 4 !important;
  }
  
  #editor, #highlight, #highlight code {
      font-size: 12px !important;
      font-family: monospace !important;
      line-height: 20pt !important;
      box-sizing: border-box !important;
  }
  

    `}static get properties(){return{instance:{type:Object,reflect:!0},header:{type:String,reflect:!0},mode:{type:String,reflect:!0}}}willUpdate(t){t.has("instance")}render(){const t="javascript";return z`
      <div id="controls">
        <h3>${t[0].toUpperCase()+t.slice(1)} Editor</h3>
        ${this.getControls()}
      </div>
      <div id='editorContainer' style="position: relative; width: 100%; height: 100%;">
        <textarea 
        id='editor' 
        spellcheck="false" 
        placeholder='Write your ${t} code...'
        @input="${t=>{console.error("input detected"),this.text(t.target.value),this.scroll(t.target)}}"
      
      ></textarea>
        <pre id="highlight" aria-hidden="true">
            <code class="language-${t}"></code>
        </pre>
    </div>
    `}}customElements.define("visualscript-code-editor",Xt);class Gt extends J{constructor(t={graph:{},header:"Object"}){var e,i,s;super(),this.history=[],this.getActions=(t,e)=>{let i;return"object"==typeof e[t]&&(i=z`<visualscript-button primary=true size="small" @click="${()=>{this.history.push({parent:e,key:this.header}),this.graph=e[t],this.header=t,this.mode=Array.isArray(e[t])?"plot":"view"}}">${Array.isArray(e[t])?z`Plot`:z`View`}</visualscript-button>`),z`
      <div class="actions">
            ${i}
      </div>
      `},this.getElement=(t,e)=>z`
        <div class="attribute separate">
        <div>
          <span class="name">${t}</span><br>
          <span class="value">${"object"==typeof e[t]?Object.keys(e[t]).length?e[t].constructor.name:z`Empty ${e[t].constructor.name}`:e[t]}</span>
        </div>
          ${this.getActions(t,e)}
        </div>`,this.graph=null!==(e=t.graph)&&void 0!==e?e:{},this.header=null!==(i=t.header)&&void 0!==i?i:"Object",this.mode=null!==(s=t.mode)&&void 0!==s?s:"view"}static get styles(){return o`

    
    :host {
      
    }
    :host * {
      box-sizing: border-box;
      
    }

    :host > * {
      background: white;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 1px 5px 0 rgb(0 0 0 / 20%);
    }

    .main {
      
    }

    .header {
      padding: 10px 20px;
      border-top-left-radius: 3px;
      border-top-right-radius: 3px;
      font-size: 70%;
      border-bottom: 1px solid #e3e3e3;
    }

    .header span {
      font-weight: 800;
      font-size: 120%;
    }

    .container {
      background: white;
      width: 100%;
      padding: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
    }

    .separate {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .attribute {
      width: 100%;
      font-size: 90%;
      padding: 15px;
      flex-grow: 1;
      flex-wrap: wrap;
    }

    .name {
      font-weight: 800;
      padding-right: 10px;
    }

    .value {
      font-size: 80%;
    }

    `}static get properties(){return{graph:{type:Object,reflect:!0},header:{type:String,reflect:!0},mode:{type:String,reflect:!0}}}willUpdate(t){t.has("graph")}render(){var t,e;return z`
      <div>
        <div class="header separate">
          <span>${this.header}</span>
          ${this.history.length>0?z`<visualscript-button size="extra-small" @click="${()=>{const t=this.history.pop();this.header=t.key,this.graph=t.parent}}">Go Back</visualscript-button>`:""}
        </div>
        <div class="container">
              ${"view"===this.mode?null===(t=Object.keys(this.graph))||void 0===t?void 0:t.map((t=>this.getElement(t,this.graph))):null===(e=Object.keys(this.graph))||void 0===e?void 0:e.map((t=>this.getElement(t,this.graph)))}
        </div>
      </div>
    `}}customElements.define("visualscript-graph-editor",Gt);class Wt extends J{static get styles(){return o`
    :host {
      width: 100%;
      height: 100%;
      box-sizing: border-box;
    }

    :host * {
      
      box-sizing: border-box;
      
    }
    `}static get properties(){return{}}constructor(t={target:{},header:"Object"}){super()}render(){return z`

      <slot></slot>
    `}}customElements.define("visualscript-device-editor",Wt);class Zt extends J{static get styles(){return o`
    :host {
      width: 100%;
      height: 100%;
      box-sizing: border-box;
    }

    :host * {
      
      box-sizing: border-box;
      
    }
    `}static get properties(){return{}}constructor(t={target:{},header:"Object"}){super()}render(){return z`

      <slot></slot>
    `}}customElements.define("visualscript-session-editor",Zt);const Vt=o`

slot {
  display: grid;
  grid-template-columns: 1fr fit-content(100%);
  grid-template-rows: fit-content(75px) 1fr fit-content(75px);
  grid-template-areas: 
          "nav nav"
          "main side"
          "foot foot";

  width: 100%;
  height: 100%;
}

`;class Jt extends J{constructor(t={}){var e,i;super(),this.apps=new Map,this.open=null===(e=t.open)||void 0===e||e,this.closeHandler=null!==(i=t.closeHandler)&&void 0!==i?i:()=>{},t.toggletext&&(this.toggletext=t.toggletext),this.toggle="string"==typeof t.toggle?document.getElementById(t.toggle):t.toggle}static get styles(){return o`
    
    :host {
      color-scheme: light dark;
      position: relative;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      grid-area: main;
      overflow: hidden;
    }

    :host([global]) {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1000;
      pointer-events: none;
    }

    :host([open]) {
      pointer-events: all;
    }


    :host([global]) slot {
      opacity: 0;
      pointer-events: none;
    }

    :host([open]) #close {
      display: block;
    }

    :host * {
      box-sizing: border-box;
    }

    slot {
      background: white;
      color: black;
    }

    ${Vt}

    :host([open]) slot {
      opacity: 1;
      pointer-events: all;
    }

    #close {
      position: absolute; 
      top: 22px;
      right: 22px;
      z-index: 101;
      display: none;
    }

    #dashboard-toggle {
      background: white;
      position: absolute; 
      pointer-events: all;
      top: 0px;
      right: 22px;
      z-index: 1000;
      color: black;
      border: 1px solid black;
      border-top: none;
      padding: 10px 15px;
      cursor: pointer;
      font-size: 70%;
      font-weight: bold;
      border-bottom-left-radius: 7px;
      border-bottom-right-radius: 7px;
      box-shadow: 0 1px 5px 0 rgb(0 0 0 / 20%);
    }

    :host([open]) #dashboard-toggle {
      display: none;
    }

    @media (prefers-color-scheme: dark) {
      slot {
        color: white;
        background: black;
      }

      #dashboard-toggle { 
        border: 1px solid white;
        border-top: none;
        color: white;
        box-shadow: 0 1px 5px 0 rgb(255 255 255 / 20%);
        background: black;
      }
    }
    `}static get properties(){return{toggletext:{type:String,reflect:!0},toggle:{type:Object,reflect:!0},open:{type:Boolean,reflect:!0},closeHandler:{type:Function,reflect:!0},global:{type:Boolean,reflect:!0}}}render(){var t;if(this.global?this.classList.add("global"):this.classList.remove("global"),this.global){const t=document.querySelectorAll("visualscript-app");for(var e=0;e<t.length;e++){const i=t[e];this.apps.has(i.name)||this.apps.set(i.name,i)}}this.open?this.classList.add("open"):(this.classList.remove("open"),this.dispatchEvent(new CustomEvent("close"))),this.main=this.querySelector("visualscript-main"),this.footer=this.querySelector("visualscript-footer"),this.nav=this.querySelector("visualscript-nav"),this.sidebar=this.querySelector("visualscript-sidebar");const i=()=>{this.open=!0;this.apps.values().next().value.toggle.shadowRoot.querySelector("button").click()};return this.toggle&&(this.toggle.onclick=i),z`
      ${this.global&&!this.toggle?z`<div id="dashboard-toggle" @click=${i}>${null!==(t=this.toggletext)&&void 0!==t?t:"Edit"}</div>`:""}
      ${this.global?z`<visualscript-button id='close' secondary size="small" @click=${()=>this.open=!1}>Close</visualscript-button>`:""}
      <slot>
      </slot>
    `}}customElements.define("visualscript-dashboard",Jt);const Kt={name:{type:String,reflect:!0}};class Qt extends J{constructor(t){super(),this.to=t}static get styles(){return o`

    :host {
      flex-grow: 1;
      min-width: 100px;
    }

    :host * {
      box-sizing: border-box;
    }

    button {
        color: black;
        background: rgb(205,205,205);
        border-right: 1px solid rgb(230,230,230);
        border: 0px;
        padding: 6px 20px;
        text-align: center;
        font-size: 80%;
        cursor: pointer;
        width: 100%;
        height: 100%;
    }

    button > span {
      font-size: 60%;
    }

    button:hover {
        background: rgb(230,230,230);
      }
  
      button:active {
        background: rgb(210,210,210);
      }
  
      button.selected {
        background: rgb(230,230,230);
      }


      @media (prefers-color-scheme: dark) {
        button {
            color: white;
            background: rgb(50,50,50);
            border-right: 1px solid rgb(25,25,25);
        }

        button:hover {
            background: rgb(60,60,60);
        }
      
        button:active {
        background: rgb(75,75,75);
        }
      
        button.selected {
        background: rgb(60,60,60);
        }

      }
    `}static get properties(){return Kt}render(){var t;return z`
      <button class="${this.selected?"selected":""}"  @click=${t=>{this.to.on(t);this.to.dashboard.main.shadowRoot.querySelector("visualscript-tab-bar")?(this.to.toggle.shadowRoot.querySelector("button").classList.add("selected"),this.to.dashboard.main.tabs.forEach((e=>{e!=this.to?(e.toggle.shadowRoot.querySelector("button").classList.remove("selected"),e.style.display="none",e.off(t)):e.style.display=""}))):console.warn("No TabBar instance in the global Main");const e=this.to.dashboard;if(e){const t=e.querySelector("visualscript-sidebar");t&&(t.content=this.to.controlPanel.children.length?this.to.controlPanel:"")}}}>${null!==(t=this.to.name)&&void 0!==t?t:"Tab"} <span>${this.to.type}</span></button>
    `}}customElements.define("visualscript-tab-toggle",Qt);class te extends J{constructor(t={}){super(),this.label="Control",this.type="button",this.persist=!1,this.options=[],this.onChange=()=>{},this.getElement=()=>{"select"===this.type?this.element=new Ot(this):"file"===this.type?this.element=new jt(this):"switch"===this.type?this.element=new Mt(this):"range"===this.type?this.element=new Tt(this):["input","text","number"].includes(this.type)?this.element=new Ft(this):this.element=new kt(this)},this.willUpdate=t=>{t.forEach(((t,e)=>{this.element&&(this.element[e]=this[e])}))},t.label&&(this.label=t.label),t.type&&(this.type=t.type),t.park&&(this.park=t.park),t.persist&&(this.persist=t.persist),t.options&&(this.options=t.options),t.value&&(this.value=t.value),t.onChange&&(this.onChange=t.onChange),t.accept&&(this.accept=t.accept),t.webkitdirectory&&(this.webkitdirectory=t.webkitdirectory),t.directory&&(this.directory=t.directory),t.multiple&&(this.multiple=t.multiple),t.onClick&&(this.onClick=t.onClick),t.primary&&(this.primary=t.primary),t.backgroundColor&&(this.backgroundColor=t.backgroundColor),t.size&&(this.size=t.size)}static get styles(){return o`

    :host {
      width: 100%;
      height: 100%;
    }

    slot {
      display: none;
    }

    div {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0px 5px;
      margin: 10px;
      border: 1px solid rgb(180,180,180);
      /* white-space: nowrap; */
    }

    h5 {
      margin: 0;
    }


    div > * {
      padding: 10px;
    }

    span { 
      flex-grow: 1;
    }

    @media (prefers-color-scheme: dark) {
      div {
        border: 1px solid rgb(120,120,120);
      }
    }

    `}static get properties(){return{label:{type:String,reflect:!0},type:{type:String,reflect:!0},persist:{type:Boolean,reflect:!0},park:{type:Boolean,reflect:!0},value:{type:Object,reflect:!0},options:{type:Object,reflect:!0},onChange:{type:Object,reflect:!0},accept:{type:String,reflect:!0},webkitdirectory:{type:Boolean,reflect:!0},directory:{type:Boolean,reflect:!0},multiple:{type:Boolean,reflect:!0},primary:{type:Boolean,reflect:!0},backgroundColor:{type:String,reflect:!0},size:{type:String,reflect:!0},onClick:{type:Object,reflect:!0}}}render(){return this.getElement(),z`<div><h5>${this.label}</h5>${this.element}</div><slot></slot>`}updated(t){const e=this.shadowRoot.querySelector("slot").assignedNodes();"button"===this.type&&e.length&&e.forEach((t=>this.element.appendChild(t.cloneNode())))}}customElements.define("visualscript-control",te);const ee=o`

:host {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  background: inherit;
}

slot {
  overflow: scroll;
}

:host * {
  
  box-sizing: border-box;
  
}
`,ie={name:{type:String,reflect:!0},controls:{type:Array,reflect:!0},on:{type:Function,reflect:!0},off:{type:Function,reflect:!0}};class se extends J{constructor(t={}){var e;super(),this.controls=[],this.on=()=>{},this.off=()=>{},this.type="tab",this.addControl=t=>{this.controlPanel.appendChild(t)},this.updated=()=>{this.querySelectorAll("visualscript-control").forEach((t=>{"app"===this.type?t.park=!0:t.park||this.addControl(t)}))},t.name&&(this.name=t.name),t.controls&&(this.controls=t.controls),t.on&&(this.on=t.on),t.off&&(this.off=t.off);let i=document.body.querySelectorAll("visualscript-dashboard");this.dashboard=null!==(e=Array.from(i).find((t=>t.parentNode===document.body)))&&void 0!==e?e:new Jt,this.dashboard.global=!0,this.dashboard.open=!1,this.toggle=new Qt(this),this.dashboard.addEventListener("close",(t=>{this.off(t)}))}static get styles(){return ee}static get properties(){return ie}willUpdate(t){t.has("controls")&&(this.controlPanel=document.createElement("div"),this.controls.forEach((t=>{this.addControl(new te(t))})))}render(){return z`
      <slot></slot>
    `}}customElements.define("visualscript-tab",se);class re extends se{constructor(t={}){const e=Object.assign({on:e=>{this.dashboard.main.appendChild(this),t.on instanceof Function&&t.on(e)},off:e=>{this.style.display="",this.parent.appendChild(this),t.off instanceof Function&&t.off(e)}},t);e.name=t.name,super(e),this.name=t.name,this.type="app",this.parent=this.parentNode}static get styles(){return o`
    :host {
      color-scheme: light dark;
      max-width: 100vw;
      max-height: 100vh;
    }


    slot {
      overflow: hidden !important;
    }

    ${ee}
    ${Vt}
    `}static get properties(){return Object.assign({},ie)}render(){return parent||(this.parent=this.parentNode),z`
        <slot></slot>
      `}}customElements.define("visualscript-app",re);const oe={};class ne extends J{static get styles(){return o`

    :host {
      background: whitesmoke;
      overflow-y: hidden;
      overflow-x: scroll;
      display: flex;
      position: sticky;
      width: 100%;
      top: 0;
      left: 0;
      z-index: 1000;
    }

    /* Tab Scrollbar */
    :host::-webkit-scrollbar {
      height: 2px;
      position: absolute;
      bottom: 0;
      left: 0;
    }

    :host::-webkit-scrollbar-track {
      background: transparent;
    }

    :host::-webkit-scrollbar-thumb {
      border-radius: 10px;
    }

    /* Handle on hover */
    :host(:hover)::-webkit-scrollbar-thumb {
      background: rgb(118, 222, 255);
    }

      @media (prefers-color-scheme: dark) {

        :host {
          background: rgb(25,25,25);
        }

        :host(:hover)::-webkit-scrollbar-thumb {
          background: rgb(240, 240, 240);
        }

      }
    `}static get properties(){return oe}constructor(t={}){super()}render(){return z`
      <slot></slot>
    `}}customElements.define("visualscript-tab-bar",ne);class ae extends J{constructor(t={target:{},header:"Object"}){super(),this.tabs=new Map,this.getTabs=()=>{var t;const e=[];if(null===(t=this.parentNode)||void 0===t?void 0:t.global){const t=document.querySelectorAll("visualscript-app");for(var i=0;i<t.length;i++)e.includes(t[i])||e.push(t[i])}for(i=0;i<this.children.length;i++){const t=this.children[i];t instanceof se&&e.push(t)}return e.forEach((t=>this.tabs.set(t.name,t))),e}}static get styles(){return o`

    :host {
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      grid-area: main;
      overflow: hidden;
      background: inherit;
      color: inherit;
      position: relative;
    }

    :host * {
      box-sizing: border-box;
    }
    `}static get properties(){return{tabs:{type:Object}}}render(){const t=this.getTabs().map(((t,e)=>(0!==e&&(t.style.display="none"),t.toggle)));return z`
      <visualscript-tab-bar style="${t.length<1?"display: none;":""}">${t}</visualscript-tab-bar>
      <slot></slot>
    `}}customElements.define("visualscript-main",ae);class le extends J{constructor(t={}){super(),this.things=[],this.search=!1,this.load=(t,e)=>(t.style.display="none",z`<div id=tile @click=${()=>{console.log("clicked!")}}>
        <div>
          <h3>${t.name}</h3>
          <p>Item #${e}.</p>
        <div>
      </div>`),this.getThings=()=>{this.things=[];for(var t=0;t<this.children.length;t++){const e=this.children[t];e.name&&this.things.push(e)}return this.things},t.search&&(this.search=t.search)}static get styles(){return o`

    :host {
      width: 100%;
      height: 100%;
    } 

    #things {
      width: 100%;
      height: 100%;
      display: flex;
      flex-wrap: wrap;
    }

    #tile {
      box-sizing: border-box;
      flex: 1 0 auto;
      aspect-ratio: 1 / 1 ;
      max-width: 200px;
      border-radius: 10px;
      margin: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.2);
      cursor: pointer;
      transition: 0.5s;
    }

    #tile:hover{
      background: rgba(0,0,0,0.1);
    }

    #tile > div {
      padding: 25px;
    }
    `}static get properties(){return{}}render(){return this.getThings(),z`
      <visualscript-search .items=${this.things}></visualscript-search>
      <div id=things>
      ${this.things.map(this.load)}
      </div>
      <section>
        <slot></slot>
      </section>
    `}}customElements.define("visualscript-gallery",le);class ce extends J{constructor(t={}){super(),this.content="",this.interacted=!1,this.closed=t.closed,this.classList.add("default")}static get styles(){return o`

    
    :host {

      --collapse-width: ${600}px;
      --dark-color: rgb(25, 25, 25);
      --light-color: rgb(240, 240, 240);

      --blue-spiral: repeating-linear-gradient(
        45deg,
        rgb(30, 167, 253),
        rgb(30, 167, 253) 10px,
        rgb(118, 222, 255) 10px,
        rgb(118, 222, 255) 20px
      );

      /* Light Hue: 118, 222, 255 */
      /* Dark Hue: 0, 116, 196 */

      --light-spiral: repeating-linear-gradient(
        45deg,
        rgb(190, 190, 190),
        rgb(190, 190, 190) 10px,
        rgb(240, 240, 240) 10px,
        rgb(240, 240, 240) 20px
      );

      --dark-spiral: repeating-linear-gradient(
        45deg,
        rgb(25, 25, 25),
        rgb(25, 25, 25) 10px,
        rgb(75, 75, 75) 10px,
        rgb(75, 75, 75) 20px
      );

      --final-toggle-width: 15px;

      color: black;
      grid-area: side;
      background: var(--light-color);
      position: relative;
      display: flex;
      overflow: hidden;
      max-width: 50vw;
    }


    :host > * {
      box-sizing: border-box;
    }

    :host([closed]) > #main {
        width: 0px;
        overflow: hidden;
    }

    :host([closed]) > #toggle {
      width: var(--final-toggle-width);
    }

    #main {
      overflow: hidden;
    }

    #toggle:hover { 
      background: var(--blue-spiral)
    }

    .hidden {
      display: none;
    }

    #toggle {
      height: 100%;
      width: 10px;
      background: rgb(25, 25, 25);
      cursor: pointer;
      background: var(--light-spiral);
      border:none;
    }

    #toggle:active {
      background: var(--blue-spiral)
    }

    #controls {
      overflow-x: hidden;
      overflow-y: scroll;
      height: 100%;
    }

    @media only screen and (max-width: ${600}px) {
      :host {
        max-width: 100%;
      }

      :host(.default) > #main {
          width: 0px;
          overflow: hidden;
      }

      :host(.default) > #toggle {
        width: var(--final-toggle-width);
      }
    }


    #toggle {
      position: sticky;
      left:0;
      top: 0;
    }

    @media (prefers-color-scheme: dark) {
      :host {
        color: white;
        background: var(--dark-color);
      }

      #toggle {
        background: var(--dark-spiral)
      }
    }

    `}static get properties(){return{closed:{type:Boolean,reflect:!0},content:{type:Object,reflect:!0}}}render(){var t;const e=this.content||(null===(t=this.children)||void 0===t?void 0:t.length);return z`
        <button id=toggle class="${e?"":"hidden"}" @click=${()=>{const t=this.classList.contains("default");this.classList.remove("default"),window.innerWidth<600&&t||(this.closed=!this.closed)}}></button>
        <div id=main>
          <div id=controls>
          ${this.content}
          <slot></slot>
          </div>
        </div>
      `}}customElements.define("visualscript-sidebar",ce);class he extends J{static get styles(){return o`

    :host {
      width: 100%;
    }

    h4 {
      background: rgb(25, 25, 25);
      color: white;
      margin: 0px;
      padding: 10px 25px;
    }

    @media (prefers-color-scheme: dark) {
      h4 {
        color: black;
        background: rgb(60, 60, 60);
      }
    }

    `}static get properties(){return{}}constructor(t={}){super()}render(){return z`
          <h4><slot></slot></h4>
      `}}customElements.define("visualscript-sidebar-header",he),t.App=re,t.Button=kt,t.CodeEditor=Xt,t.Control=te,t.Dashboard=Jt,t.DeviceEditor=Wt,t.File=jt,t.Footer=At,t.Gallery=le,t.GraphEditor=Gt,t.Input=Ft,t.Loader=vt,t.Main=ae,t.Modal=$t,t.Nav=mt,t.ObjectEditor=Bt,t.Overlay=St,t.Range=Tt,t.Search=zt,t.Select=Ot,t.SessionEditor=Zt,t.Sidebar=ce,t.SidebarHeader=he,t.Spectrogram=Yt,t.Switch=Mt,t.Tab=se,t.TabBar=ne,t.TabBarPropsLit=oe,t.TabPropsLit=ie,t.TabToggle=Qt,t.TabTogglePropsLit=Kt,t.TimeSeries=Ut,t.slotGrid=Vt,t.streams=ft,t.tabStyle=ee,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=/sm/777c28d2de44280b58d474ad3a18313ec9523b063ebbf8cbdcec6fd0dd7775fe.map